/*!
 * Infinite Scroll PACKAGED v3.0.4
 * Automatically add next page
 *
 * Licensed GPLv3 for open source use
 * or Infinite Scroll Commercial License for commercial use
 *
 * https://infinite-scroll.com
 * Copyright 2018 Metafizzy
 */
function loadPopinJs(){var i=$(".TemasBreadcrumb").length>0?"release_cna_tw.js":"cna.js",n=document.createElement("script"),t;n.type="text/javascript";n.charset="utf-8";n.async=!0;n.src=window.location.protocol+"//api.popin.cc/searchbox/"+i;t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}function loadTenMaxJs(n,t,i){var r,u=n.getElementsByTagName(t)[0];n.getElementById(i)||(r=n.createElement(t),r.id=i,r.async=!0,r.src="//api.pvmax.net/v1.0/pvmax.js",u.parentNode.insertBefore(r,u))}function infiniteScroll(){var f=$(".article-feed").data("category"),i=$(".article-feed").data("nextUrlInList"),r=$(".article-feed").data("nextIdInList"),t=$(".article:last").data("nextUrlsInTopic"),n,u=$(".article-feed").data("tno");if(typeof u=="undefined"&&(u=$(".article:last").data("tno")),jQuery.isEmptyObject(t)?n=i:(n=t[0],t=$.grep(t,function(n,t){return t>0})),typeof n!="undefined"&&n!=""){$(".article-feed").infiniteScroll({path:function(){return n},append:".article",hideNav:".pagination",history:"replace"});$(".article-feed").on("append.infiniteScroll",function(){dynamicLoadSiteDetailCss();loadInfinitDFP();setShareBtns();FB.XFBML.parse();addMovieRecord();var e=!1;$.inArray(f,["newstopic","newsworld","magazine","photoalbum","cultureweekly","project"])>-1&&(e=!0);jQuery.isEmptyObject(t)?jQuery.isEmptyObject(i)||e!=!0?n=null:$.ajax({url:"/cna2018api/api/nextsimplenewsitem/",type:"POST",data:{urlcategory:f,tno:u,id:r},dataType:"json",success:function(f,o){o==="success"&&f.SimpleNewsItem.Id!=""&&f.SimpleNewsItem.PageUrl!=""?(i=f.SimpleNewsItem.PageUrl,r=f.SimpleNewsItem.Id):(i=null,r=null);n=i;e==!0?t=null:(t=$(".article:last").data("nextUrlsInTopic"),u=$(".article:last").data("tno"));n==null&&activeInfinitEndAd()},error:function(){i=null;r=null;n=null;n==null&&activeInfinitEndAd()}}):(n=t[0],t=$.grep(t,function(n,t){return t>0}));n==null&&activeInfinitEndAd();$(".BlueBlock").last().css({display:"block"})});$(".article-feed").on("history.infiniteScroll",function(n,t){document.title=t})}else activeInfinitEndAd()}function generateNextArticleIdx(){return nextArticleIdx++}function loadInfinitDFP(){var n=generateNextArticleIdx(),i=$(".article:last"),t;i.attr("articleIdx",n);t=$(".article:last .adslot_infinite:not([js_render])").filter(":visible");t.each(function(){$this=$(this);$this.hasClass("js_top_ad")&&$this.attr("id","adslot_top_"+n);$this.hasClass("js_middle_ad")&&$this.attr("id","adslot_middle_"+n);$this.hasClass("js_bottom_ad")&&$this.attr("id","adslot_bottom_"+n);$this.hasClass("js_pcBox_ad")&&$this.attr("id","adslot_pcBox_"+n);$this.hasClass("js_mbBox_ad")&&$this.attr("id","adslot_mbBox_"+n);$this.hasClass("js_pcBox_EndAd")&&$this.attr("id","adslot_pcBox_EndAd_"+n);$this.hasClass("js_mbBox_EndAd")&&$this.attr("id","adslot_mbBox_EndAd_"+n);$this.hasClass("js_pcBox_EndAd2")&&$this.attr("id","adslot_pcBox_EndAd2_"+n);$this.hasClass("js_mbBox_EndAd2")&&$this.attr("id","adslot_mbBox_EndAd2_"+n)});googletag.cmd.push(function(){var n=[];t.each(function(t){$this=$(this);try{$this.attr("js_render","true");n[t]=$this.attr("data-dfp").indexOf("adslot_pcBox_EndAd")>=0||$this.attr("data-dfp").indexOf("adslot_mbBox_EndAd")>=0?googletag.defineSlot("/137033094/"+$this.data("dfp"),[parseInt($this.data("width")),parseInt($this.data("height"))],$this.attr("id")).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0):googletag.defineSlot("/137033094/"+$this.data("dfp"),[parseInt($this.data("width")),parseInt($this.data("height"))],$this.attr("id")).addService(googletag.pubads())}catch(i){}});googletag.pubads().disableInitialLoad();googletag.enableServices();googletag.pubads().addEventListener("slotRenderEnded",function(n){(n.slot.getSlotElementId().indexOf("adslot_pcBox_EndAd")>=0||n.slot.getSlotElementId().indexOf("adslot_mbBox_EndAd")>=0)&&n.isEmpty&&$("#"+n.slot.getSlotElementId()).parent().removeClass("show")});t.each(function(){googletag.display($(this).attr("id"))});$(n).each(function(t){googletag.pubads().refresh([n[t]])})})}function activeInfinitEndAd(){var t,i,r,n;$(".nextline:last").hide();t=$(".advertiseGroup:last");t.length&&t.find("#adslot_bottom").length==0&&t.append("<div class='advertiseBox bottom_ad adslot_infinite js_bottom_ad' id='adslot_bottom' data-width='300' data-height='600' data-dfp='cna2018_article_300x600_RB'><\/div>");window.innerWidth<1024?(i=$(".advertiseMobile:last:hidden"),typeof i!="undefined"&&(n=$(".article:last").data("canonicalUrl"),i.show(),i.append("<div class='advertiseBox article_mb_ad adslot_infinite js_top_ad' id='adslot_top' data-width='300' data-height='250' data-dfp='cna2018_mob_article_300x250_RT'><\/div><div class='advertiseBox article_mb_ad_recommend'><div class='_popIn_recommend' data-url='"+n+"'><\/div><\/div><div class='advertiseBox article_mb_ad_BL adslot_infinite pcBox_ad js_pcBox_ad' id='adslot_bl' data-width='300' data-height='250' data-dfp='cna2018_all_article_300x250_BL'><\/div><div class='advertiseBox article_mb_ad_recommend'><div class='_pvmax_recommend' data-widget-id='02be951a-c2b5-4a79-a4b4-0dcdc8f2079b' data-ref='"+n+"'><\/div><script> PVMax ? PVMax.parse() : ''; <\/script><\/div><div class='advertiseBox article_mb_ad_BR adslot_infinite mbBox_ad js_mbBox_ad' id='adslot_br' data-width='300' data-height='250' data-dfp='cna2018_all_article_300x250_BR'><\/div>"))):(r=$(".articleADbox:last:hidden"),typeof r!="undefined"&&(n=$(".article:last").data("canonicalUrl"),r.show(),r.append("<div class='advertiseBox bottomADbox left adslot_infinite pcBox_ad js_pcBox_ad' id='adslot_bl' data-width='300' data-height='250' data-dfp='cna2018_all_article_300x250_BL'><\/div><div class='advertiseBox bottomADbox right adslot_infinite mbBox_ad js_mbBox_ad' id='adslot_br' data-width='300' data-height='250' data-dfp='cna2018_all_article_300x250_BR'><\/div><div class='advertiseBox sixSquare' ><div class='_popIn_recommend' data-url='"+n+"'><\/div><\/div><div class='advertiseBox sixSquare'><div class='_pvmax_recommend' data-widget-id='0c743d1a-6cb6-4202-8d2a-e478628aea1c' data-ref='"+n+"'><\/div><script> PVMax ? PVMax.parse() : ''; <\/script><\/div>")));loadInfinitDFP();loadTenMaxJs(document,"script","pvmax-jssdk");loadPopinJs()}function addMovieRecord(){$("video").bind("play",function(){var n=$(this).data("vod-id"),t;$.inArray(n,vids)===-1&&(vids.push(n),t="/cna2018api/api/record/movieid/"+n+"/",callAPI(t,function(){}))});$("video").bind("ended",function(){var t=$(this).data("vod-id"),n=$.inArray(t,vids);n!==-1&&vids.splice(n,1)})}function dynamicLoadSiteDetailCss(){function i(){n==2&&videoResize()}function r(){t==2&&albumOpen()}var u,n,f,e,t,o,s;$(".youtubeBox").length&&(u=STATIC_DOC_PATH+"/css/youtube.min.css?v="+STATIC_DOC_VER,checkSheetLoaded(u)||loadJsCssFile(u,"css",function(){}));$(".VOD").length&&(n=0,f=STATIC_DOC_PATH+"/css/video-js.min.css?v="+STATIC_DOC_VER,checkSheetLoaded(f)?(n+=1,i()):loadJsCssFile(f,"css",function(){n+=1;i()}),e=STATIC_DOC_PATH+"/js/video.min.js?v="+STATIC_DOC_VER,checkScriptLoaded(e)?(n+=1,i()):loadJsCssFile(e,"js",function(){n+=1;i()}));$(".album").length&&(t=0,o=STATIC_DOC_PATH+"/css/colorbox.min.css?v="+STATIC_DOC_VER,checkSheetLoaded(o)?(t+=1,r()):loadJsCssFile(o,"css",function(){t+=1;r()}),s=STATIC_DOC_PATH+"/js/jquery.colorbox.min.js?v="+STATIC_DOC_VER,checkScriptLoaded(s)?(t+=1,r()):loadJsCssFile(s,"js",function(){t+=1;r()}))}function checkSheetLoaded(n){for(var i=document.styleSheets,t=0;t<i.length-1;t++)if(i[t].href!=null&&i[t].href.indexOf(n)>=0)return!0;return!1}function checkScriptLoaded(n){for(var i=document.getElementsByTagName("script"),t=0;t<i.length;t++)if(i[t].getAttribute("src")==n)return!0;return!1}function videoResize(){window.innerWidth<980?$(".myVOD.video-js").css("height",function(){var n=$(".video-js").width();return n*.75}):$(".myVOD.video-js").css({width:"580px",height:"432px"})}function albumOpen(){$(".albumOpen").on("click",function(){var n=$(this).attr("data-fid"),t=$(this).attr("data-pno"),i=$(this).closest("article").attr("data-title");$.colorbox({iframe:!0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"100%",href:"/gallery/"+n+"/"+t+".aspx?title="+encodeURIComponent(i),title:!1,closeButton:!1,opacity:.85,fixed:!0,onOpen:function(){$("#colorbox").addClass("albumListOpen");var n=$(window).scrollTop();$("#colorbox").data("ycoord",n);n=n*-1;$("body").css("position","fixed").css("left","0px").css("right","0px").css("top",n+"px")},onClosed:function(){$("body").css("position","").css("left","auto").css("right","auto").css("top","auto");$(window).scrollTop($("#colorbox").data("ycoord"))}});$(document).bind("cbox_open",function(){$("body").css({overflow:"hidden"})}).bind("cbox_closed",function(){$("body").css({overflow:"auto"})})})}var flag_scroll_page,_pvmax,nextArticleIdx,vids;!function(n,t){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("jquery")):n.jQueryBridget=t(n,n.jQuery)}(window,function(n,t){"use strict";function i(i,u,o){function s(n,t,r){var u,e="$()."+i+'("'+t+'")';return n.each(function(n,s){var h=o.data(s,i),c,l;if(!h)return void f(i+" not initialized. Cannot call methods, i.e. "+e);if(c=h[t],!c||"_"==t.charAt(0))return void f(e+" is not a valid method");l=c.apply(h,r);u=void 0===u?l:u}),void 0!==u?u:n}function h(n,t){n.each(function(n,r){var f=o.data(r,i);f?(f.option(t),f._init()):(f=new u(r,t),o.data(r,i,f))})}o=o||t||n.jQuery;o&&(u.prototype.option||(u.prototype.option=function(n){o.isPlainObject(n)&&(this.options=o.extend(!0,this.options,n))}),o.fn[i]=function(n){if("string"==typeof n){var t=e.call(arguments,1);return s(this,n,t)}return h(this,n),this},r(o))}function r(n){!n||n&&n.bridget||(n.bridget=i)}var e=Array.prototype.slice,u=n.console,f="undefined"==typeof u?function(){}:function(n){u.error(n)};return r(t||n.jQuery),i}),function(n,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():n.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function t(){}var n=t.prototype;return n.on=function(n,t){if(n&&t){var i=this._events=this._events||{},r=i[n]=i[n]||[];return r.indexOf(t)==-1&&r.push(t),this}},n.once=function(n,t){if(n&&t){this.on(n,t);var i=this._onceEvents=this._onceEvents||{},r=i[n]=i[n]||{};return r[t]=!0,this}},n.off=function(n,t){var i=this._events&&this._events[n],r;if(i&&i.length)return r=i.indexOf(t),r!=-1&&i.splice(r,1),this},n.emitEvent=function(n,t){var i=this._events&&this._events[n],u,f,r,e;if(i&&i.length){for(i=i.slice(0),t=t||[],u=this._onceEvents&&this._onceEvents[n],f=0;f<i.length;f++)r=i[f],e=u&&u[r],e&&(this.off(n,r),delete u[r]),r.apply(this,t);return this}},n.allOff=function(){delete this._events;delete this._onceEvents},t}),function(n,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():n.matchesSelector=t()}(window,function(){"use strict";var n=function(){var t=window.Element.prototype,i,n,u,r;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(i=["webkit","moz","ms","o"],n=0;n<i.length;n++)if(u=i[n],r=u+"MatchesSelector",t[r])return r}();return function(t,i){return t[n](i)}}),function(n,t){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("desandro-matches-selector")):n.fizzyUIUtils=t(n,n.matchesSelector)}(window,function(n,t){var i={},u,r;return i.extend=function(n,t){for(var i in t)n[i]=t[i];return n},i.modulo=function(n,t){return(n%t+t)%t},u=Array.prototype.slice,i.makeArray=function(n){if(Array.isArray(n))return n;if(null===n||void 0===n)return[];var t="object"==typeof n&&"number"==typeof n.length;return t?u.call(n):[n]},i.removeFrom=function(n,t){var i=n.indexOf(t);i!=-1&&n.splice(i,1)},i.getParent=function(n,i){for(;n.parentNode&&n!=document.body;)if(n=n.parentNode,t(n,i))return n},i.getQueryElement=function(n){return"string"==typeof n?document.querySelector(n):n},i.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},i.filterFindElements=function(n,r){n=i.makeArray(n);var u=[];return n.forEach(function(n){if(n instanceof HTMLElement){if(!r)return void u.push(n);t(n,r)&&u.push(n);for(var f=n.querySelectorAll(r),i=0;i<f.length;i++)u.push(f[i])}}),u},i.debounceMethod=function(n,t,i){i=i||100;var u=n.prototype[t],r=t+"Timeout";n.prototype[t]=function(){var f=this[r],t,n;clearTimeout(f);t=arguments;n=this;this[r]=setTimeout(function(){u.apply(n,t);delete n[r]},i)}},i.docReady=function(n){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(n):document.addEventListener("DOMContentLoaded",n)},i.toDashed=function(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()},r=n.console,i.htmlInit=function(t,u){i.docReady(function(){var e=i.toDashed(u),f="data-"+e,s=document.querySelectorAll("["+f+"]"),h=document.querySelectorAll(".js-"+e),c=i.makeArray(s).concat(i.makeArray(h)),l=f+"-options",o=n.jQuery;c.forEach(function(n){var i,e=n.getAttribute(f)||n.getAttribute(l),s;try{i=e&&JSON.parse(e)}catch(h){return void(r&&r.error("Error parsing "+f+" on "+n.className+": "+h))}s=new t(n,i);o&&o.data(n,u,s)})})},i}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("ev-emitter"),require("fizzy-ui-utils")):n.InfiniteScroll=t(n,n.EvEmitter,n.fizzyUIUtils)}(window,function(n,t,i){function r(n,t){var u=i.getQueryElement(n),o;if(!u)return void console.error("Bad element for InfiniteScroll: "+(u||n));if(n=u,n.infiniteScrollGUID)return o=e[n.infiniteScrollGUID],o.option(t),o;this.element=n;this.options=i.extend({},r.defaults);this.option(t);f&&(this.$element=f(this.element));this.create()}var f=n.jQuery,e={},u,s,h,o;return r.defaults={},r.create={},r.destroy={},u=r.prototype,i.extend(u,t.prototype),s=0,u.create=function(){var n=this.guid=++s,t,i;if(this.element.infiniteScrollGUID=n,e[n]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath(),t=this.getPath&&this.getPath(),!t)return void console.error("Disabling InfiniteScroll");this.updateGetAbsolutePath();this.log("initialized",[this.element.className]);this.callOnInit();for(i in r.create)r.create[i].call(this)},u.option=function(n){i.extend(this.options,n)},u.callOnInit=function(){var n=this.options.onInit;n&&n.call(this,this)},u.dispatchEvent=function(n,t,i){var e,r,u;this.log(n,i);e=t?[t].concat(i):i;(this.emitEvent(n,e),f&&this.$element)&&(n+=".infiniteScroll",r=n,t&&(u=f.Event(t),u.type=n,r=u),this.$element.trigger(r,i))},h={initialized:function(n){return"on "+n},request:function(n){return"URL: "+n},load:function(n,t){return(n.title||"")+". URL: "+t},error:function(n,t){return n+". URL: "+t},append:function(n,t,i){return i.length+" items. URL: "+t},last:function(n,t){return"URL: "+t},history:function(n,t){return"URL: "+t},pageIndex:function(n,t){return"current page determined to be: "+n+" from "+t}},u.log=function(n,t){if(this.options.debug){var i="[InfiniteScroll] "+n,r=h[n];r&&(i+=". "+r.apply(this,t));console.log(i)}},u.updateMeasurements=function(){this.windowHeight=n.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+n.pageYOffset},u.updateScroller=function(){var t=this.options.elementScroll;if(!t)return void(this.scroller=n);if(this.scroller=t===!0?this.element:i.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t;},u.updateGetPath=function(){var n=this.options.path,t,i;return n?(t=typeof n,"function"==t)?void(this.getPath=n):(i="string"==t&&n.match("{{#}}"),i?void this.updateGetPathTemplate(n):void this.updateGetPathSelector(n)):void console.error("InfiniteScroll path option required. Set as: "+n)},u.updateGetPathTemplate=function(n){this.getPath=function(){var t=this.pageIndex+1;return n.replace("{{#}}",t)}.bind(this);var i=n.replace("{{#}}","(\\d\\d?\\d?)"),r=new RegExp(i),t=location.href.match(r);t&&(this.pageIndex=parseInt(t[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))},o=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/],u.updateGetPathSelector=function(n){var f=document.querySelector(n),t,e,i,r,u;if(!f)return void console.error("Bad InfiniteScroll path option. Next link not found: "+n);for(i=f.getAttribute("href"),r=0;i&&r<o.length;r++)if(e=o[r],u=i.match(e),u){t=u.slice(1);break}return t?(this.isPathSelector=!0,this.getPath=function(){var n=this.pageIndex+1;return t[0]+n+t[2]}.bind(this),this.pageIndex=parseInt(t[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void console.error("InfiniteScroll unable to parse next link href: "+i)},u.updateGetAbsolutePath=function(){var t=this.getPath(),r=t.match(/^http/)||t.match(/^\//),n,i;if(r)return void(this.getAbsolutePath=this.getPath);n=location.pathname;i=n.substring(0,n.lastIndexOf("/"));this.getAbsolutePath=function(){return i+"/"+this.getPath()}},r.create.hideNav=function(){var n=i.getQueryElement(this.options.hideNav);n&&(n.style.display="none",this.nav=n)},r.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},u.destroy=function(){this.allOff();for(var n in r.destroy)r.destroy[n].call(this);delete this.element.infiniteScrollGUID;delete e[this.guid]},r.throttle=function(n,t){t=t||200;var i,r;return function(){var u=+new Date,e=arguments,f=function(){i=u;n.apply(this,e)}.bind(this);i&&u<i+t?(clearTimeout(r),r=setTimeout(f,t)):f()}},r.data=function(n){n=i.getQueryElement(n);var t=n&&n.infiniteScrollGUID;return t&&e[t]},r.setJQuery=function(n){f=n},i.htmlInit(r,"infinite-scroll"),f&&f.bridget&&f.bridget("infiniteScroll",r),r}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core")):t(n,n.InfiniteScroll)}(window,function(n,t){function r(n){for(var i=document.createDocumentFragment(),t=0;n&&t<n.length;t++)i.appendChild(n[t]);return i}function u(n){for(var t,r,u=n.querySelectorAll("script"),i=0;i<u.length;i++)t=u[i],r=document.createElement("script"),f(t,r),r.innerHTML=t.innerHTML,t.parentNode.replaceChild(r,t)}function f(n,t){for(var u,r=n.attributes,i=0;i<r.length;i++)u=r[i],t.setAttribute(u.name,u.value)}function e(n,t,i,r){var u=new XMLHttpRequest;u.open("GET",n,!0);u.responseType=t||"";u.setRequestHeader("X-Requested-With","XMLHttpRequest");u.onload=function(){if(200==u.status)i(u.response);else{var n=new Error(u.statusText);r(n)}};u.onerror=function(){var t=new Error("Network error requesting "+n);r(t)};u.send()}var i=t.prototype;return t.defaults.loadOnScroll=!0,t.defaults.checkLastPage=!0,t.defaults.responseType="document",t.create.pageLoad=function(){this.canLoad=!0;this.on("scrollThreshold",this.onScrollThresholdLoad);this.on("load",this.checkLastPage);this.options.outlayer&&this.on("append",this.onAppendOutlayer)},i.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},i.loadNextPage=function(){var n,t,i;!this.isLoading&&this.canLoad&&(n=this.getAbsolutePath(),this.isLoading=!0,t=function(t){this.onPageLoad(t,n)}.bind(this),i=function(t){this.onPageError(t,n)}.bind(this),e(n,this.options.responseType,t,i),this.dispatchEvent("request",null,[n]))},i.onPageLoad=function(n,t){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[n,t]),this.appendNextPage(n,t),n},i.appendNextPage=function(n,t){var u=this.options.append,o="document"==this.options.responseType;if(o&&u){var i=n.querySelectorAll(u),f=r(i),e=function(){this.appendItems(i,f);this.isLoading=!1;this.dispatchEvent("append",null,[n,t,i])}.bind(this);this.options.outlayer?this.appendOutlayerItems(f,e):e()}},i.appendItems=function(n,t){n&&n.length&&(t=t||r(n),u(t),this.element.appendChild(t))},i.appendOutlayerItems=function(i,r){var u=t.imagesLoaded||n.imagesLoaded;return u?void u(i,r):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},i.onAppendOutlayer=function(n,t,i){this.options.outlayer.appended(i)},i.checkLastPage=function(n,t){var r=this.options.checkLastPage,u,f,i,e;if(r){if(u=this.options.path,"function"==typeof u&&(f=this.getPath(),!f))return void this.lastPageReached(n,t);("string"==typeof r?i=r:this.isPathSelector&&(i=u),i&&n.querySelector)&&(e=n.querySelector(i),e||this.lastPageReached(n,t))}},i.lastPageReached=function(n,t){this.canLoad=!1;this.dispatchEvent("last",null,[n,t])},i.onPageError=function(n,t){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[n,t]),n},t.create.prefill=function(){if(this.options.prefill){var n=this.options.append;if(!n)return void console.error("append option required for prefill. Set as :"+n);this.updateMeasurements();this.updateScroller();this.isPrefilling=!0;this.on("append",this.prefill);this.once("error",this.stopPrefill);this.once("last",this.stopPrefill);this.prefill()}},i.prefill=function(){var n=this.getPrefillDistance();this.isPrefilling=n>=0;this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},i.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},i.stopPrefill=function(){this.log("stopPrefill");this.off("append",this.prefill)},t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){var r=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this);this.resizeHandler=this.onResize.bind(this);var n=this.options.scrollThreshold,t=n||0===n;t&&this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},r.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},r.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},r.bindScrollWatchEvents=function(t){var i=t?"addEventListener":"removeEventListener";this.scroller[i]("scroll",this.pageScrollHandler);n[i]("resize",this.resizeHandler)},r.onPageScroll=t.throttle(function(){var n=this.getBottomDistance();n<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),r.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},r.getWindowBottomDistance=function(){var t=this.top+this.element.clientHeight,i=n.pageYOffset+this.windowHeight;return t-i},r.getElementBottomDistance=function(){var n=this.scroller.scrollHeight,t=this.scroller.scrollTop+this.scroller.clientHeight;return n-t},r.onResize=function(){this.updateMeasurements()},i.debounceMethod(t,"onResize",150),t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){var r=t.prototype,u;return t.defaults.history="replace",u=document.createElement("a"),t.create.history=function(){if(this.options.history){u.href=this.getAbsolutePath();var n=u.origin||u.protocol+"//"+u.host,t=n==location.origin;return t?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+u.origin+" on "+location.origin+" . History behavior disabled.")}},r.createHistoryAppend=function(){this.updateMeasurements();this.updateScroller();this.scrollPages=[{top:0,path:location.href,title:document.title}];this.scrollPageIndex=0;this.scrollHistoryHandler=this.onScrollHistory.bind(this);this.unloadHandler=this.onUnload.bind(this);this.scroller.addEventListener("scroll",this.scrollHistoryHandler);this.on("append",this.onAppendHistory);this.bindHistoryAppendEvents(!0)},r.bindHistoryAppendEvents=function(t){var i=t?"addEventListener":"removeEventListener";this.scroller[i]("scroll",this.scrollHistoryHandler);n[i]("unload",this.unloadHandler)},r.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=r.destroyHistory=function(){var n=this.options.history&&this.options.append;n&&this.bindHistoryAppendEvents(!1)},r.onAppendHistory=function(n,t,i){if(i&&i.length){var r=i[0],f=this.getElementScrollY(r);u.href=t;this.scrollPages.push({top:f,path:u.href,title:n.title})}},r.getElementScrollY=function(n){return this.options.elementScroll?this.getElementElementScrollY(n):this.getElementWindowScrollY(n)},r.getElementWindowScrollY=function(t){var i=t.getBoundingClientRect();return i.top+n.pageYOffset},r.getElementElementScrollY=function(n){return n.offsetTop-this.top},r.onScrollHistory=function(){for(var t,i,r,u=this.getScrollViewY(),n=0;n<this.scrollPages.length;n++){if(r=this.scrollPages[n],r.top>=u)break;t=n;i=r}t!=this.scrollPageIndex&&(this.scrollPageIndex=t,this.setHistory(i.title,i.path))},i.debounceMethod(t,"onScrollHistory",150),r.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:n.pageYOffset+this.windowHeight/2},r.setHistory=function(n,t){var i=this.options.history,r=i&&history[i+"State"];r&&(history[i+"State"](null,n,t),this.options.historyTitle&&(document.title=n),this.dispatchEvent("history",null,[n,t]))},r.onUnload=function(){var t=this.scrollPageIndex,i,r;0!==t&&(i=this.scrollPages[t],r=n.pageYOffset-i.top+this.top,this.destroyHistory(),scrollTo(0,r))},r.onPageLoadHistory=function(n,t){this.setHistory(n.title,t)},t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){function r(n,t){this.element=n;this.infScroll=t;this.clickHandler=this.onClick.bind(this);this.element.addEventListener("click",this.clickHandler);t.on("request",this.disable.bind(this));t.on("load",this.enable.bind(this));t.on("error",this.hide.bind(this));t.on("last",this.hide.bind(this))}return t.create.button=function(){var n=i.getQueryElement(this.options.button);n},t.destroy.button=function(){this.button&&this.button.destroy()},r.prototype.onClick=function(n){n.preventDefault();this.infScroll.loadNextPage()},r.prototype.enable=function(){this.element.removeAttribute("disabled")},r.prototype.disable=function(){this.element.disabled="disabled"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},t.Button=r,t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){function u(n){e(n,"none")}function f(n){e(n,"block")}function e(n,t){n&&(n.style.display=t)}var r=t.prototype;return t.create.status=function(){var n=i.getQueryElement(this.options.status);n&&(this.statusElement=n,this.statusEventElements={request:n.querySelector(".infinite-scroll-request"),error:n.querySelector(".infinite-scroll-error"),last:n.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},r.bindHideStatus=function(n){var t=this.options.append?"append":"load";this[n](t,this.hideAllStatus)},r.showRequestStatus=function(){this.showStatus("request")},r.showErrorStatus=function(){this.showStatus("error")},r.showLastStatus=function(){this.showStatus("last");this.bindHideStatus("off")},r.showStatus=function(n){f(this.statusElement);this.hideStatusEventElements();var t=this.statusEventElements[n];f(t)},r.hideAllStatus=function(){u(this.statusElement);this.hideStatusEventElements()},r.hideStatusEventElements=function(){var n,t;for(n in this.statusEventElements)t=this.statusEventElements[n],u(t)},t}),function(n,t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(n){return n}),function(n,t){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("ev-emitter")):n.imagesLoaded=t(n,n.EvEmitter)}("undefined"!=typeof window?window:this,function(n,t){function o(n,t){for(var i in t)n[i]=t[i];return n}function h(n){if(Array.isArray(n))return n;var t="object"==typeof n&&"number"==typeof n.length;return t?c.call(n):[n]}function i(n,t,r){if(!(this instanceof i))return new i(n,t,r);var u=n;return"string"==typeof n&&(u=document.querySelectorAll(n)),u?(this.elements=h(u),this.options=o({},this.options),"function"==typeof t?r=t:o(this.options,t),r&&this.on("always",r),this.getImages(),f&&(this.jqDeferred=new f.Deferred),void setTimeout(this.check.bind(this))):void e.error("Bad element for imagesLoaded "+(u||n))}function r(n){this.img=n}function u(n,t){this.url=n;this.element=t;this.img=new Image}var f=n.jQuery,e=n.console,c=Array.prototype.slice,s;return i.prototype=Object.create(t.prototype),i.prototype.options={},i.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)},i.prototype.addElementImages=function(n){var i,r,t,f,u,e;if("IMG"==n.nodeName&&this.addImage(n),this.options.background===!0&&this.addElementBackgroundImages(n),i=n.nodeType,i&&s[i]){for(r=n.querySelectorAll("img"),t=0;t<r.length;t++)f=r[t],this.addImage(f);if("string"==typeof this.options.background)for(u=n.querySelectorAll(this.options.background),t=0;t<u.length;t++)e=u[t],this.addElementBackgroundImages(e)}},s={1:!0,9:!0,11:!0},i.prototype.addElementBackgroundImages=function(n){var i=getComputedStyle(n),r,t,u;if(i)for(r=/url\((['"])?(.*?)\1\)/gi,t=r.exec(i.backgroundImage);null!==t;)u=t&&t[2],u&&this.addBackground(u,n),t=r.exec(i.backgroundImage)},i.prototype.addImage=function(n){var t=new r(n);this.images.push(t)},i.prototype.addBackground=function(n,t){var i=new u(n,t);this.images.push(i)},i.prototype.check=function(){function n(n,i,r){setTimeout(function(){t.progress(n,i,r)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",n);t.check()}):void this.complete()},i.prototype.progress=function(n,t,i){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!n.isLoaded;this.emitEvent("progress",[this,n,t]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,n);this.progressedCount==this.images.length&&this.complete();this.options.debug&&e&&e.log("progress: "+i,n,t)},i.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done",n;(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred)&&(n=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[n](this))},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var n=this.getIsImageComplete();return n?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(n,t){this.isLoaded=n;this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},r.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)},u.prototype=Object.create(r.prototype),u.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;var n=this.getIsImageComplete();n&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)},u.prototype.confirm=function(n,t){this.isLoaded=n;this.emitEvent("progress",[this,this.element,t])},i.makeJQueryPlugin=function(t){t=t||n.jQuery;t&&(f=t,f.fn.imagesLoaded=function(n,t){var r=new i(this,n,t);return r.jqDeferred.promise(f(this))})},i.makeJQueryPlugin(),i});$(function(){function n(){var n,t,i;window.innerWidth>1024&&(window.innerWidth>1280?n=1150:window.innerWidth<1280&&window.innerWidth>1024&&(n=window.innerWidth*.95),$(".TemasBlock").css("width",function(){return(window.innerWidth-n)/2+750}),t=-(window.innerWidth-n)/2,i={marginLeft:t},$(".appenedNav").css(i))}$("body").on("click",".fontSizeBtn",function(){var n=$(this).parents("body").toggleClass("resize");n.hasClass("resize")?setCookie("CnaFontSize","resize",525600,""):setCookie("CnaFontSize","resize",-1,"")});$("body").on("click",".imgModuleBtn",function(){$(this).parent(".StyleBtn").next(".mainList").addClass("imgModule");$(this).parent(".StyleBtn").next(".mainList").removeClass("noimgModule")});$("body").on("click",".noimgModuleBtn",function(){$(this).parent(".StyleBtn").next(".mainList").removeClass("imgModule");$(this).parent(".StyleBtn").next(".mainList").addClass("noimgModule")});var t=$(document).height();$(".article-feed").on("append.infiniteScroll",function(){n()});n();$(".article-feed").on("history.infiniteScroll",function(){ga("set","page",location.pathname);ga("send","pageview")})});dynamicLoadSiteDetailCss();flag_scroll_page=!1;$(window).scroll(function(){flag_scroll_page==!1&&(flag_scroll_page=!0,addMovieRecord(),$(".mySubViewMoreBtn").length==0&&infiniteScroll(),loadInfinitDFP())});_pvmax=window.innerWidth<1024?{siteId:"d7fda1dd-d334-4b46-9843-e4db55ecb9ba"}:{siteId:"d7fda1dd-d334-4b46-9843-e4db55ecb9ba"};nextArticleIdx=0;vids=[];$(function(){function u(){t=="video"&&(window.innerWidth<=1024?$("#myMainList > li > a").each(function(){var n=$(this);replaceVideoUrls(n)}):$(".blue[href*='list/video.aspx']").attr("href","http://cnavideo.cna.com.tw"))}function o(n,t,i,r){var u="/cna2018api/api/fulllist/categorycode/"+n+"/tno/"+t+"/pageidx/"+i+"/";callAPI(u,r)}function s(n,t,i){var r="/cna2018api/api/simplelist/searchkeyword/"+n+"/pageidx/"+t+"/";callAPI(r,i)}function i(n,t){t.length&&$.each(t,function(t,i){var r="";i.Source!==null&&i.Source!==""&&(r="<div class='wrap'><img src='"+i.Source+"' alt='"+i.HeadLine+"'><\/div>");$(n).append("<li><a href='"+i.PageUrl+"'>"+r+"<div class='listInfo'><h2>"+i.HeadLine+"<\/h2><div class='date'>"+i.CreateTime+"<\/div><\/div><\/a><\/li>")})}function h(n,t){t.length&&$.each(t,function(t,i){var r="";$.each(i.Photos,function(n,t){if(["photo","chart","video","youtube"].indexOf(t.iType.toLowerCase())>-1)return r="<div class='wrap'><img src='"+t.Photo+"' alt='"+i.Title+"'><\/div>",!1});$(n).append("<li><a href='"+i.MetaData.CanonicalUrl+"'>"+r+"<div class='listInfo'><h2>"+i.Title+"<\/h2><div class='date'>"+i.Time+"<\/div><\/div><\/a><\/li>")})}var f;$(".picsource").each(function(){var n=$(this).find("span").text(),t;n.length>11&&(t=n.substring(0,11)+"...",$(this).find("span").text(t))});var t=$(".listContent").data("category"),e=$(".listContent").data("tno"),r=encodeURI($(".listContent").data("keyword")),n=1;u();f=$(".listContent").data("infinite")=="True";f&&infiniteScroll();$(".mySubCat").on("click",function(){t=$(this).attr("data-cat");n=1;$(this).siblings().removeClass("active");$(this).addClass("active");$("#myViewMoreBtn").show();var r="/cna2018api/api/simplelist/categorycode/"+t+"/pageidx/"+n+"/";callAPI(r,function(n){$("#myMainList").empty();i("#myMainList",n.result.SimpleItems);n.result.NextPageIdx===""&&$("#myViewMoreBtn").hide()})});$(".myViewMoreBtn").on("click",function(){n+=1;var f;f=r!=""?"/cna2018api/api/simplelist/keyword/"+r+"/pageidx/"+n+"/":"/cna2018api/api/simplelist/categorycode/"+t+"/pageidx/"+n+"/";callAPI(f,function(n){if(document.getElementById("myMainList_Style2")){var t=$("#myMainList_Style2").data("recommandids"),r=t.toString().split(",");n.result.SimpleItems=$.grep(n.result.SimpleItems,function(n){return jQuery.inArray(n.Id,r)==-1});i("#myMainList_Style2",n.result.SimpleItems)}else i("#myMainList",n.result.SimpleItems);u();n.result.NextPageIdx===""&&$(".myViewMoreBtn").hide()})});$(".mySubViewMoreBtn").on("click",function(){n+=1;o(t,e,n,function(n){h("#myMainList",n.result.FullNewsItems);n.result.NextPageIdx===""&&($(".mySubViewMoreBtn").hide(),infiniteScroll())})});$(".mySearchViewMoreBtn").on("click",function(){n+=1;s(r,n,function(n){i("#myMainList",n.result.SimpleItems);n.result.NextPageIdx===""&&$(".mySearchViewMoreBtn").hide()})})});