!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=109)}([function(e,t){e.exports={inherit:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},asArray:function(e){return null==e?[]:Array.isArray(e)?e:[e]},trim:function(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}}},function(e,t,n){var i,r=n(37);e.exports=(i=window.Promise,/\{\s*\[native code\]\s*\}/.test(""+i)?window.Promise:r)},function(e,t){var n={},i={};e.exports={register:function(e,t){n[e]||(n[e]=t,(i[e]||[]).forEach((function(e){e(t)})))},shim:function(e,t){n[e]?t(n[e]):(i[e]||(i[e]=[])).push(t)}}},function(e,t,n){var i=n(1),r=n(5),o=n(19),s=n(10),a=window.MutationObserver||window.WebKitMutationObserver,c={insertDescendant:function(e,t){var n=new a((function(e){(function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].addedNodes.length>0)return!0;return!1})(e)&&t()}));return n.observe(e,{childList:!0,subtree:!0}),function(){n.disconnect()}},removeSelf:function(e,t){var n=new a((function(n){(function(e,t){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(Array.prototype.indexOf.call(r.removedNodes,e)>h)return!0}return!1})(e,n)&&t()}));return n.observe(e.parentNode,{childList:!0}),function(){n.disconnect()}}},d={insertDescendant:function(e,t){return p(e,"DOMNodeInserted",t)},removeSelf:function(e,t){return p(e.parentNode,"DOMNodeRemoved",(function(n){n.target===e&&t()}))}},u={insertDescendant:r.unsupported,removeSelf:r.unsupported},l=a?c:window.addEventListener?d:u;var h=-1;function p(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}function f(e,t){if(void 0!==e.nodeType)return[e];var n=document.createElement("div");for(n.innerHTML=e;t&&t--;)n=n.firstElementChild;return m(n),Array.prototype.slice.call(n.childNodes)}var m=!("srcdoc"in document.createElement("iframe"))||o.isIOSLine?function(e){e.querySelectorAll&&Array.prototype.forEach.call(e.querySelectorAll("iframe"),_)}:r.nop;function _(e){var t=e.getAttribute("srcdoc");if(!e.getAttribute("src")&&t)if(o.isIOSLine){var n='javascript: window.frameElement.getAttribute("data-polyfill-srcdoc");';e.removeAttribute("srcdoc"),e.setAttribute("data-polyfill-srcdoc",t),e.setAttribute("src",n)}else{n="javascript: '"+t.replace(/'/g,"\\'")+"'";e.setAttribute("src",n),e.contentWindow&&(e.contentWindow.location=n)}}function v(e){Array.prototype.slice.call(e).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}function y(e,t){return t?function(n){e.insertBefore(n,t)}:e.appendChild.bind(e)}function g(e,t,n){switch(n=Array.prototype.slice.call(n),t){case"BEFORE":Array.prototype.forEach.call(n,y(e.parentNode,e));break;case"AFTER":Array.prototype.forEach.call(n,y(e.parentNode,e.nextSibling));break;case"ADD":Array.prototype.forEach.call(n,y(e));break;case"ADD_FRONT":Array.prototype.forEach.call(n,y(e,e.firstChild));break;case"REPLACE":g(e,"BEFORE",n),v([e]);break;case"INNER":e.innerHTML="",g(e,"ADD",n);break;case"REPLACE_HIDE":g(e,"BEFORE",n),e.style.display="none";break;default:throw new Error("Unreconigzed position type: "+t)}}function E(e,t,n){switch(t){case"BEFORE":case"AFTER":case"ADD":case"ADD_FRONT":return g(e,t,n),v.bind(void 0,n);case"REPLACE":var i=n.length?n[0]:e.nextSibling;return g(e,"REPLACE",n),function(){g(i,"BEFORE",[e]),v(n)};case"INNER":var r=Array.prototype.slice.call(e.childNodes);return g(e,"INNER",n),g.bind(void 0,e,"INNER",r);case"REPLACE_HIDE":var o=e.style.display;return g(e,"REPLACE_HIDE",n),function(){v(n),e.style.display=o};default:throw new Error("Unreconigzed position type: "+t)}}var b,w=["BEFORE","AFTER","ADD","ADD_FRONT","REPLACE","INNER"].reduce((function(e,t){return e[t]=function(e,n,i){var r=f(n,i);return E(e,t,r),r},e}),{});try{b=window.self!==window.top}catch(e){b=!0}var A,T=window.$sf&&window.$sf.ext,x=b&&T&&T.inViewPercentage;function R(e){var t=A&&A.indexOf(e);t>=0&&A.splice(t,1)}e.exports={handleDOMRemoved:l.removeSelf,handleDOMInserted:l.insertDescendant,raf$:function(){return window.requestAnimationFrame?new i(window.requestAnimationFrame.bind(void 0)):i.resolve()},place:w,placeNodes:E,isInIframe:b,isInSafeframe:x,isInDOM:function(e){return e.ownerDocument.body.contains(e)},listenToSafeFrameStatus:function(e){return void 0===A&&(A=[],T.register(window.innerWidth,window.innerHeight,(function(e,t){A.forEach((function(n){try{n(e,t)}catch(e){}}))}))),A.push(e),R.bind(void 0,e)},parseDimension:function(e){if(null!=e&&""!==e){if("string"!=typeof e)throw new Error("Expecting a string");return e=e.replace("px",""),Number(e)}},setStyles:function(e,t){var n={},i=e.style;return Object.keys(t).forEach((function(e){n[e]=i[e],i[e]=t[e]})),function(){Object.assign(i,n),n=void 0}},elementBuilder:function(e,t){var n=document.createElement(e);for(var i in t)0===i.indexOf("$")?n.style[i.substring(1)]=t[i]:n[i]=t[i];return n},getLoadResult$:function(e){var t,n=new i((function(n,i){function r(){t(),n()}function o(e){t(),i(e)}t=function(){e.removeEventListener("load",r),e.removeEventListener("error",o)},e.addEventListener("load",r,!1),e.addEventListener("error",o,!1)}));return n.disconnect=t,n},buildElementsFromHtml:f,onWindowChange:function(e,t){return!1!==t&&(e=s.throttle(e,"number"==typeof t?t:100)),window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},mergeAttributes:function(e,t){e.attributes&&t instanceof HTMLElement&&Array.prototype.forEach.call(e.attributes,(function(e){var n=e.value;switch(e.name){case"class":if((n=n.trim()).length>0){var i=t.className.trim();t.className=i.length>0?i+" "+n:n}break;case"style":if((n=n.trim()).length>0){var r=t.getAttribute("style");r&&r.length>0&&";"!==r[r.length-1]&&(r+=";"),t.style=r+n}break;default:t.setAttribute(e.name,n)}}))},processIframeDescendants:m,getLang:function(){var e=document.documentElement,t=e.lang||e.getAttribute("xml:lang");if(!("string"!=typeof t||t.length<2))return t.substring(0,2).toLowerCase()}}},function(e,t){function n(e,t,i){this._adcode=!0,this.type=e||n.TYPES.GENERAL_ERROR,this.cause=t,this.context=i||{};var r=Number(this.type.code);this.isWarning=r>=700&&r<800,this.isUserError=r>=800&&r<900}n.isAdcodeError=function(e){return e&&!0===e._adcode},n.prototype.toString=function(){var e="";if(this.context&&Object.keys(this.context).length>0)try{e=" "+JSON.stringify(this.context)}catch(e){}return"["+this.type.code+"] "+this.type.message+e},n.TYPES={SPACE_ELEMENT_NOT_FOUND:{code:"101",message:"Space element not found",sampling:.001},INVALID_AD_TAG:{code:"102",message:"Invalid ad tag",sampling:.001},INVALID_PRODUCT_TYPE:{code:"103",message:"Invalid product type",sampling:.001},AD_REQUEST_FAILURE:{code:"104",message:"Ad request failure"},PLAN_REQUEST_FAILURE:{code:"105",message:"Plan request failure"},INVALID_SSP_AD_RESPONSE:{code:"202",message:"Invalid SSP ad response"},DETACHED_IFRAME_CONTAINER:{code:"203",message:"Detached iframe container"},INVALID_SSP_PLAN_RESPONSE:{code:"204",message:"Invalid SSP plan response"},RENDERING_ERROR:{code:"300",message:"Rendering error",sampling:.001},INVALID_BANNER_IFRAME_MESSAGE_FORMAT:{code:"302",message:"Invalid banner iframe message format"},INVALID_AD_CONTAINER_TEMPLATE:{code:"303",message:"Invalid ad container template"},FREAKOUT_TIMEOUT:{code:"304",message:"FreakOut timeout",sampling:.001},TARGET_DETACHED:{code:"305",message:"Target element has been detached from parent"},ILLEGAL_TEMPLATE:{code:"306",message:"Template format is illegal or content is empty",sampling:.001},TRACKER_ERROR:{code:"400",message:"Tracker error"},INVALID_TRACKER_URL_FORMAT:{code:"401",message:"Invalid tracker URL format"},USE_OF_DEPRECATED_FEATURE:{code:"700",message:"Use of deprecated feature",sampling:.001},USE_OF_HIDDEN_FIF:{code:"701",message:"Use of data-rmax-hidden-fif attribute",sampling:.001},MOLECULAR_SETUP_SCRIPT_ERROR:{code:"701",message:"Error in molecular ad setup script"},MOLECULAR_MAIN_SCRIPT_ERROR:{code:"702",message:"Error in molecular ad main script"},MOLECULAR_CUSTOM_ERROR:{code:"703",message:"Error reported by molecular ad setup/main script"},MOLECULAR_CUSTOM_SCRIPT_ERROR:{code:"704",message:"Custom script loading error / None existing custom script"},HOOK_HANDLER_ERROR:{code:"800",message:"Hook handler error",sampling:.01},GENERAL_ERROR:{code:"900",message:"General error"},MODULE_ERROR:{code:"901",message:"Module error"}},e.exports=n},function(e,t,n){var i=n(1);function r(){}e.exports={nop:r,nop$:function(){return i.resolve()},unsupported:function(){throw new Error("Unsupported operation")},unimplemented:function(){throw new Error("Unimplemented function")},sequence:function(){var e=Array.prototype.filter.call(arguments,(function(e){return"function"==typeof e}));switch(e.length){case 0:return r;case 1:return e[0];default:return function(){for(var t=0,n=e.length;t<n;t++)e[t].apply(this,arguments)}}},catch:function(e){return function(){try{e.apply(this,arguments)}catch(e){console.error(e)}}}}},function(e,t,n){var i=n(1),r=n(9),o=n(8);function s(e,t){return t=!!t,new i((function(n,i){var r=new XMLHttpRequest;"withCredentials"in r||o.warn("No 'withCredentials' in HttpRequest"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status){var e=r.responseText;n(e)}else i(new Error(r.status+": "+r.statusText))},r.open("GET",e,!0),t&&(r.withCredentials=!0),r.send()}))}var a=window._rmaxStyles$||(window._rmaxStyles$={});var c=window._rmaxInlineStyles||(window._rmaxInlineStyles={});var d=window._rmaxScripts$||(window._rmaxScripts$={});var u={};e.exports={post:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(t))},get$:s,ajaxGet:s,installCSS:function(e,t){if(!c[e]){c[e]=!0;var n=document.createElement("style");n.textContent=t,document.head.appendChild(n)}},loadCSS$:function(e){if(!e)throw new Error("CSS URL cannot be undefined.");return a[e]||(a[e]=function(e){return new i((function(t,n){document.head.querySelector('link[href="'+e+'"]')&&t();var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.addEventListener("load",t,!1),i.addEventListener("error",n,!1),i.href=e,document.head.appendChild(i)}))}(e))},loadJS:function(e,t,n,i){if(null==e)return null;var r=document.body.querySelector('script[src="'+e+'"]');return r?(n&&n(),null):((r=document.createElement("script")).onload=n,r.onerror=i,r.type="text/javascript",t||r.setAttribute("defer",!0),document.body.appendChild(r),r.src=e,r)},loadJS$:function(e,t){if(!e)throw new Error("JS URL cannot be undefined.");return d[e]||(d[e]=function(e,t){return new i((function(n,i){document.querySelector('script[src="'+e+'"]')&&n();var r=document.createElement("script");switch(r.type="text/javascript",r.onload=n,r.onerror=i,t){case"async":r.setAttribute("async","async");break;case"defer":r.setAttribute("defer","defer")}document.body.appendChild(r),r.src=e}))}(e,t))},importJS$:function(e){if(!e)throw new Error("Cannot import JS from empty URL.");return u[e]||(u[e]=function(e){var t,n=r(),o=window._moduleResolvers||(window._moduleResolvers={});return s(e).then((function(e){return"var module = {exports: {}};\n(function(module) {\n"+e+'\n})(module);\nwindow._moduleResolvers["'+n+'"](module.exports);'})).then((function(e){return new i((function(i,r){o[n]=i,(t=document.createElement("script")).type="text/javascript",t.text=e,document.body.appendChild(t)}))})).then((function(e){return delete o[n],t&&t.parentNode&&t.parentNode.removeChild(t),e})).catch((function(e){throw e}))}(e))},encodeQueryParams:function(e){return"?"+Object.keys(e).reduce((function(t,n){if(e.hasOwnProperty(n)){var i=e[n];t.push(encodeURIComponent(n)+(void 0!==i?"="+encodeURIComponent(i):""))}return t}),[]).join("&")}}},function(e,t){var n={REQUEST:"request",IMPRESSION:"impression",VIEWABLE:"viewable",CLICK:"click",VISIBLE:"visible"},i={START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete"},r={UNMUTE:"unmute",MUTE:"mute",PAUSE:"pause",PLAY:"play"},o={VIDEO_CLICK:"videoClick",COMPANION_CLICK:"companionClick",VIEWABLE_DETERMINED:"viewableDetermined",VIEWABLE_UNDETERMINED:"viewableUndetermined",VIEWED:"viewed",TIME_SPENT:"timeSpent"},s="progress_",a=s.length;function c(e){return Object.keys(e).reduce((function(t,n){return t[e[n]]=!0,t}),{})}var d=c(i);var u=c(r);var l={ofProgress:function(e){return s+e},isVideoProgress:function(e){return"string"==typeof e&&(!!d[e]||e.substring(0,a)===s)},isInteractive:function(e){return"string"==typeof e&&!!u[e]||e===n.CLICK||e===o.VIDEO_CLICK||e===o.COMPANION_CLICK}};e.exports=Object.freeze(Object.assign(n,i,r,o,l))},function(e,t,n){var i=n(5).nop;function r(e){return console[e].bind(console,"%cDr%cMax%c","padding: 0.2em 0 0.2em 0.5em; font-weight:700; background: #111; color: #66ffcc","padding: 0.2em 0.5em 0.2em 0; font-weight:700; background: #111; color: #9999ff","background: inherit; color: inherit")}e.exports={print:r,error:r("error"),warn:i,log:i}},function(e,t){e.exports=function(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}},function(e,t,n){var i=n(1);e.exports={version:"3.35.2",throttle:function(e,t,n){var i,r,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:+new Date,i=null,s=e.apply(r,o),i||(r=o=null)},d=function(){var d=+new Date;a||!1!==n.leading||(a=d);var u=t-(d-a);return r=this,o=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),a=d,s=e.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(c,u)),s};return d.cancel=function(){clearTimeout(i),a=0,i=r=o=null},d},waitFor$:function(e,t,n){return"function"==typeof t&&void 0===n&&(n=t,t=void 0),new i((function(i,r){var o,s=0;function a(){o&&clearInterval(o)}function c(){var e;try{e=n()}catch(e){a(),r(e)}void 0!==e?(a(),i(e,s)):(s>=t&&(a(),r(new Error("Reach maximum retry: "+s))),s++)}o=setInterval(c,e),c()}))},any$:function(e){return new i((function(t,n){for(var i=0,r=[],o=0,s=e.length;o<s;o++)!function(o){e[o].then((function(e){t({index:o,value:e})}),(function(e){r[o]=e,++i===s&&n(r)}))}(o)}))}}},function(e,t,n){var i=n(0),r=n(5),o=n(31);function s(e){o.call(this,e)}i.inherit(s,o),Object.assign(s.prototype,{_appendChild:r.unsupported}),Object.defineProperty(s.prototype,"isLeaf",{value:!0}),e.exports=s},function(e,t,n){var i=n(20),r=n(8),o=n(4);function s(e,t,n){this._component=e,this._thisArg=t,this._onError="function"==typeof n?n:void 0}function a(e){this._component=e,this._emitter=new i,this._hookctx=new s(e,this,this._error.bind(this))}Object.assign(s.prototype,{wrap:function(e,t){return"function"==typeof e&&void 0===t?this._wrapUnnamed(e):this._wrapNamed(e,t)},_wrapNamed:function(e,t){var n=this._thisArg,i=this._error.bind(this,e);return function(){try{t.apply(n,arguments)}catch(e){i(e)}}},_wrapUnnamed:function(e){var t=this._thisArg,n=this._error.bind(this);return function(i){try{e.apply(t,arguments)}catch(e){n(i,e)}}},_error:function(e,t){o.isAdcodeError(t)||(t=new o(o.TYPES.HOOK_HANDLER_ERROR,t,{component:this._component,hook:e})),(this._onError||r.error)(t)}}),Object.defineProperties(a.prototype,{events:{get:function(){return this._emitter.events}}}),Object.assign(a.prototype,{on:function(e,t){return t=this._hookctx.wrap(e,t),this._emitter.on(e,t)},_emit:function(){this._emitter.emit.apply(this._emitter,arguments)},_destroy:function(){this._emitter=this._hookctx=void 0},_error:function(){}}),e.exports=a},function(e,t){e.exports={BANNER:"BANNER",BANNER_MODE_ONE:"BANNER-MODE-ONE",NATIVE:"NATIVE",NATIVE_GROUPED:"NATIVE-GROUPED",UNIVERSAL:"UNIVERSAL"}},function(e,t){e.exports={GPT:"gpt",DOUBLECLICK:"doubleclick",FREAKOUT:"freakout",NATIVE:"native",IFRAME:"iframe",FRIENDLY_IFRAME:"friendly-iframe",COMBO:"combo",MOLECULAR:"molecular"}},function(e,t,n){var i=n(1),r=n(9),o=n(0),s=n(3),a=n(18),c=n(17),d=n(5),u=n(12),l=n(4),h=n(44),p=n(16),f=n(7),m=n(27),_=n(16).MEASUREMENT_TYPE,v=n(47),y=n(48),g=p.VIEWABLE_TIMEOUT,E=p.VIEWABLE_THRESHOLD;function b(e,t,n,i){if(!e)throw new Error("RMaxADS instance is required");if(!t)throw new Error("Space type is required");if(!n)throw new Error("Element is required");u.call(this,"space"),i=i||{},this.initializedAt=Date.now(),this.uuid=r(),this.rmaxads=e,this.element=n,this.type=t,this.hostObject=c.getHostObject(),this._readAttributes(),this.trackerManager=new h(this.element),this.placement=new y(this.element,{selector:this.targetId,index:this.targetIndex,rootSelector:this.listenTargetSelector,position:this.targetPosition});var o=this.rmaxads._getTimeSpentUrl();this.trackerManager.add(f.TIME_SPENT,o),n.style.textDecoration="none",n.setAttribute("data-rmax-space-picked","true"),this._handleLegacyHooks(i),this.status=v.INITIALIZED}o.inherit(b,u),Object.assign(b.prototype,{start$:function(){if(this.started)return i.resolve();try{return this._start$().catch(this._fail.bind(this))}catch(e){this._fail(e)}},_start$:function(){return this._startTime=(new Date).getTime(),this.status=v.STARTED,this._emit("start"),this.placement.start(),this._setup$().then(this._getPlan$.bind(this)).then(this._runPlan$.bind(this))},_fail:function(e){throw this._error(e),this._appendResult("fail"),this._emit("fail",e),e},_setup$:function(){return this._setupSpaceElement(),i.resolve()},_setupSpaceElement:d.nop,_getPlan$:function(){return this.service.getPlan$().then(this._afterGetPlan.bind(this))},_afterGetPlan:function(e){return this._trackTimeSpent(),this.plan=e},_runPlan$:function(e){var t=e.sessionId,n=this._runChannel$.bind(this,t);return e.channels.slice(0).reverse().reduce((function(e,t){return function(i){return i?e(i):n(t).then(e)}}),this._afterRunPlan$.bind(this))()},_runChannel$:function(e,t){if(this._appendResult(t.type),this._emit("channel",t),t.type.startsWith("asiamax.")){var n=this;return this._getAsiaMaxAd$(e,t).then((function(e){return n._isNonEmptyAd(e)?n._runAd$(Object.assign(t,e)):void 0}))}return(this._trackChannelRequest(t),this._runAd$(t))},_isNonEmptyAd:function(e){return e&&Object.keys(e).filter((function(e){return"trackers"!==e})).length>0},_trackChannelRequest:function(e){this._emit("track-request",e);var t=(e.trackers||{}).request;t&&t.length>0&&(this.trackerManager.add(f.REQUEST,t),this._fireTracker(f.REQUEST))},_getAsiaMaxAd$:function(e,t){return this.service.getAsiaMaxAd$(e,t)},_runAd$:function(e){this._emit("before-channel-module",e);var t=this.ad=this._createAd(e);return this._setupAd(t,e),this._emit("channel-module",t),t.display$().then((function(){return t.filled?t:void t.destroy()}))},_setupAd:function(e,t){e.channel=t,e.events.on(m.ERROR,this._error.bind(this))},_afterRunPlan$:function(e){return this._afterRunPlan(e),i.resolve()},_afterRunPlan:function(e){var t=e?"filled":"empty";this.status=v.AD_DISPLAYED,Object.defineProperty(this,t,{value:!0}),this._appendResult(t),this._emit("display",e),this._emit(e?"fill":"empty"),e&&this._handleTrackers(e)},_handleTrackers:function(e){var t=e.channel.trackers||{};this._emit("trackers",t),this._handleImpressionTrackers(e,t),this._handleViewableTrackers(e,t),this._handleScriptTrackers(e,t)},_handleImpressionTrackers:function(e,t){this._emit("impression"),this.trackerManager.add(f.IMPRESSION,t.impression),this._fireTracker(f.IMPRESSION)},_handleViewableTrackers:function(e,t){this.trackerManager.add(f.VIEWABLE,t.viewable),this._monitorViewability(_.DISPLAY)},_handleScriptTrackers:function(e,t){this._scriptTrackers=t.script},_monitorViewability:function(e){if(void 0!==(this.ad&&this.ad.elements)){var t={visibilityThreshold:E,timeoutThreshold:g[e]||g.DISPLAY};this.viewable$=this._viewable$(t).then(this._doViewable.bind(this)).catch(this._error.bind(this))}},_viewable$:function(e){var t=this.ad&&this.ad.elements,n=this._viewabilityObserver=new a.ViewabilityObserver(t,e);return this._emit("viewability-observer",n,e),n.fulfilled$},_doViewable:function(e){this.viewed=!0,this._emit("viewable",e),this._fireViewableTracker(e),this._installScriptTrackers(this._scriptTrackers)},destroy:function(){this._emit("destroy"),this._destroy()},_destroy:d.nop,_createAd:d.unimplemented,_unrecognizedChannelTypeError:function(e,t){var n=new Error("Unrecognized channel type: "+t);return new l(l.TYPES.INVALID_SSP_RESPONSE,n,{sessionId:this.sessionId,adType:t})},_getDFPAdUnit:function(){return this.rmaxads.dfpPath+this.spaceId},_readAttributes:function(){this._readCommonAttributes(),this._readTargetAttributes(),this._readSizeAttributes(),this._readPublisherAttributes()},_readCommonAttributes:function(){if(this.spaceId=this.element.getAttribute("data-rmax-space-id"),!this.spaceId)throw new Error("Space ID not found");this.groupId=this.element.getAttribute("data-rmax-group-id"),this._clickPrefix=this.element.getAttribute("data-rmax-click-prefix")},_readTargetAttributes:function(){var e=this.element;this.targetId=e.getAttribute("data-target-id");var t=e.getAttribute("data-target-index");this.targetIndex=t&&Number(t),this.targetPosition=e.getAttribute("data-target-pos"),this.targetGptContainer=e.getAttribute("data-target-gpt-container"),this.targetDoubleClickContainer=e.getAttribute("data-target-dc-container"),this.listenTargetSelector=e.getAttribute("data-listen-target-selector")},_readSizeAttributes:function(){this.width=s.parseDimension(this.element.getAttribute("data-rmax-space-width")),this.height=s.parseDimension(this.element.getAttribute("data-rmax-space-height"))},_readPublisherAttributes:function(){this.spaceCountry=this.element.getAttribute("data-rmax-space-country"),this.targetOrigin=this.element.getAttribute("data-rmax-origin")||this.hostObject.origin},_assertSize:function(){if(void 0===this.width||void 0===this.height)throw new Error("Size is required for this space")},_appendResult:function(e){this.result=this.result?this.result+" -> "+e:e},_writeAttribute$:function(e,t){var n=this.element;return s.raf$().then(void 0===t?n.removeAttribute.bind(n,e):n.setAttribute.bind(n,e,t))},_fireTracker:function(e,t){try{this.trackerManager.fire(e,t)}catch(e){this._error(e)}},_fireViewableTracker:function(e){var t=e?2:0;this._fireTracker(f.VIEWABLE,{scrolled:0,needScroll:0,noAd:t,failed:t,requestId:this.sessionId})},_trackTimeSpent:function(){var e=(new Date).getTime()-this._startTime,t={rmaxSpaceId:this.spaceId,type:this.type,cost:e};this._fireTracker(f.TIME_SPENT,t)},_installScriptTrackers:function(e){if(e&&0!==e.length){var t=this.ad.elements;if(t&&0!==t.length){t=o.asArray(t);var n=e.map((function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t})),i=t[t.length-1],r=i.parentNode,s=i.nextSibling;n.forEach(s?function(e){r.insertBefore(e,s)}:r.appendChild.bind(r))}}},_error:function(e){var t=this.result;this.rmaxads._error(e,Object.assign({spaceId:this.spaceId,spaceStatus:this.status,spaceType:this.type,adType:this.type,sessionId:this.sessionId},t&&{spaceResult:t})),e&&e.isUserError||this._emit("error",e)},_handleLegacyHooks:function(e){var t=this.on.bind(this,"empty"),n=e.hooks||{};Object.keys(n).forEach((function(e){switch(e){case"onEmpty":case"onNoAD":n[e].forEach(t)}}))}}),Object.defineProperties(b.prototype,{started:{get:function(){return void 0!==this._startTime}},status:{get:function(){return this._status},set:function(e){this._status=e,this._writeAttribute$("data-rmax-status",e)}},result:{get:function(){return this._result},set:function(e){this._result=e,this._writeAttribute$("data-rmax-result",e)}},target:{get:function(){return this.placement.ref}},plan:{get:function(){return this._plan},set:function(e){this._plan=e,this._writeAttribute$("data-rmax-session-id",this._sessionId=e.sessionId),this._emit("plan",e)}},channel:{get:function(){return this.ad&&this.ad.channel}},sessionId:{get:function(){return this.plan&&this.plan.sessionId}},channels:{get:function(){return this.plan&&this.plan.channels}}}),e.exports=b},function(e,t){e.exports={MEASUREMENT_TYPE:{VIDEO:"VIDEO",DISPLAY:"DISPLAY"},TRACKER_EVENT_TYPES:{IMPRESSION:"impression",VIEWABLE:"viewable",VIEW_UNDETERMINED:"viewUndetermined",TIME_SPENT:"timeSpent"},VIEWABLE_TIMEOUT:{VIDEO:2e3,DISPLAY:1e3},VIEWABLE_THRESHOLD:.5,THROTTLE_INTERVAL:250}},function(e,t){e.exports={getHostObject:function(e){var t=function(e){var t=(e=e||window).document,n="";if(e.self!==e.top)try{t=e.top.document}catch(e){n=t.referrer}return!n&&t.querySelector('link[rel="canonical"]')&&(n=t.querySelector('link[rel="canonical"]').href),!n&&t.querySelector('meta[property="og:url"]')&&(n=t.querySelector('meta[property="og:url"]').content),n||(n=t.location.href),n=n.replace(/([^:]\/)\/+/g,"$1")}(e=e||window),n=e.document.createElement("a");return n.href=t,n.href.startsWith("file://")||(n.hrefAsReferer=n.href),n.origin||(n.origin=n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")),n},extractHostname:function(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]},normalizeHost:function(e){var t=document.createElement("a");t.href=e;var n=t.href;if(n&&n.startsWith("file://"))return function(e){return e&&e.endsWith("/")?e.substring(0,e.length-1):e}("https://"+n.substring(7));if(t.origin)return t.origin;var i=t.protocol;return i&&":"!==i||(i=window.location.protocol),"http:"===i&&"https:"===i||(i="https:"),i+"//"+t.hostname+(t.port?":"+t.port:"")}}},function(e,t,n){var i=n(1),r=n(16),o=n(5),s=n(30),a=n(25),c=n(10),d=n(8),u=n(3),l=n(19),h=n(43),p=n(35),f=window.IntersectionObserver,m=window.WeakMap||a,_=window.mraid,v=u.isInIframe&&!u.isInSafeframe&&!_;function y(e){return e instanceof Element}function g(e){return void 0===e?[]:Array.isArray(e)?e.filter(y):e.length?Array.prototype.filter.call(e,y):[e]}function E(e){var t,n;return function(i,r,o){if(r=!!r,i!==t||r!==n){try{e(i,r,r?NaN:o)}catch(e){d.error(e)}t=i,n=r}}}function b(e,t){var n=E(t);return function(t,i){var r=!i&&!isNaN(t)&&t>e;n(r,i,t)}}function w(e,t,n){var i=b(t,n),r=new f((function(t){t.forEach((function(t){try{t.target===e&&i(t.intersectionRatio)}catch(e){d.error(e)}}))}),{threshold:[0,t]});r.observe(e),this.disconnect=function(){r.disconnect()}}w.prototype.update=o.nop;for(var A=[],T=0;T<=1;T+=.05)A.push(T);function x(e,t,n){var i=new m,r=b(t,n),o=new f((function(t){t.forEach((function(e){var t=e.target,n=e.boundingClientRect,r=e.intersectionRect;i.set(t,{visible:r.width*r.height,total:n.width*n.height})}));var n=e.reduce((function(e,t){var n=i.get(t);return n&&(e[0]+=n.visible,e[1]+=n.total),e}),[0,0]);r(n[0]/n[1])}),{threshold:A});e.forEach(o.observe.bind(o)),this.disconnect=function(){o.disconnect()}}function R(e,t,n){var i=t.threshold;return 1===e.length?new w(e[0],i,n):new x(e,i,n)}function O(e,t,n){var i=b(t.threshold,n),o=this,s=this._throttledCheck=c.throttle((function(){var t=function(e,t){if(!(t=u.isInIframe?t:new h(window)))return[NaN,!0];var n=g(e).map((function(e){return new h(e)})).filter((function(e){return!e.isStrcitlyEmpty}));if(0===n.length)return[NaN,!1];var i=n.reduce((function(e,t){return e+t.area}),0),r=n.reduce((function(e,n){return e+n.intersect(t).area}),0);return i>0?[r/i,!1]:[n.reduce((function(e,n){return e+(t.contain(n)?1:0)}),0)/n.length,!1]}(e,o._viewport);i(t[0],t[1])}),r.THROTTLE_INTERVAL);u.isInIframe&&!this._viewport||this._listenOnWindowChange(),setTimeout(s,0)}x.prototype.update=o.nop,O.prototype._listenOnWindowChange=function(){this._disconnectWindowChange||(this._disconnectWindowChange=u.onWindowChange(this._throttledCheck,!1))},O.prototype.disconnect=function(){this._disconnectWindowChange&&this._disconnectWindowChange(),this._disconnectWindowChange=this._throttledCheck=void 0},O.prototype.update=function(e){this._throttledCheck&&(e&&(this._viewport=function(e){var t=e.window,n=new h({top:0,left:0,bottom:t.height,right:t.width}),i=e.iframe;return i.bottom=i.bottom||i.top+window.innerHeight,i.right=i.right||i.left+window.innerWidth,i=new h(i),n.intersect(i).offset({left:-i.left,top:-i.top})}(e),this._listenOnWindowChange()),this._throttledCheck())};var k=100;function S(e,t){var n=b(e.threshold,t),i=function(){n(window.$sf.ext.inViewPercentage()/k)};this.disconnect=u.listenToSafeFrameStatus((function(e,t){"geom-update"===e&&i()})),setTimeout(i,0)}S.prototype.update=o.nop;var I=.5;function C(e){var t=b(I,e),n=function(e){t(e?1:0)};_.addEventListener("viewableChange",n),this.disconnect=function(){_.removeEventListener("viewableChange",n)},setTimeout((function(){!function(e){"loading"===_.getState()?_.addEventListener("ready",e):e()}((function(){n(_.isViewable())}))}),0)}function P(e,t,n){n=E(n);var i=this;this._disconnectPageObserver=p.observe(this._onPageVisible.bind(this)),this._modern=new R(e,t,(function(){!1!==i._pageVisible&&n.apply(void 0,arguments)})),this._createLegacy=function(){return new O(e,t,n)}}function L(e,t,n){return(e=g(e)).length,_?new C(n):u.isInSafeframe?new S(t,n):f?l.isChromeOrOpera?new P(e,t,n):new R(e,t,n):new O(e,t,n)}function N(e,t){var n={threshold:t.visibilityThreshold},r={threshold:t.timeoutThreshold},o=!1!==t.fulfillAtUndetermined,a=t.VisibilityObserver||L,c=this;this.fulfilled$=new i((function(t,i){var d=new s(r,(function(e){e&&l(!1)})),u=c._visibilityObserver=new a(e,n,(function(e,t){o&&t?l(!0):d.update(!t&&e)}));function l(e){u.disconnect(),d.disconnect(),t(e)}}))}C.prototype.update=o.nop,P.prototype._onPageVisible=function(e){this._pageVisible!==e&&(this._pageVisible=e,e?(this._legacy&&this._legacy.disconnect(),this._legacy=void 0):(this._legacy=this._legacy||this._createLegacy(),this._viewport&&(this._legacy.update(this._viewport),this._viewport=void 0)))},P.prototype.update=function(e){e&&!this._disconnected&&(this._pageVisible?this._viewport=e:this._legacy&&this._legacy.update(e))},P.prototype.disconnect=function(){this._disconnected||(this._disconnected=!0,this._disconnectPageObserver(),this._modern.disconnect(),this._legacy&&this._legacy.disconnect(),this._disconnectPageObserver=this._modern=this._legacy=void 0)},N.prototype.update=function(e){var t=this._visibilityObserver;t&&t.update&&t.update(e)},e.exports={isInRegularIframe:v,VisibilityObserver:L,ViewabilityObserver:N}},function(e,t,n){"use strict";var i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,r=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)),s=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(r),a=o||s,c=/MSIE\s([\d.]+)/.test(navigator.userAgent),d=navigator.userAgent.indexOf("Chrome/")>=0,u=-1!==navigator.userAgent.indexOf("Safari")&&!d,l=navigator.userAgent.indexOf("Safari Line")>=0,h=/Safari(?:\/[\d.]+)?\sLine/.test(navigator.userAgent);e.exports={isIOS:i,isMobile:a,isPhone:o,isTablet:s,isIE10OrLess:c,isChromeOrOpera:d,isIOSLine:l,isLine:h,isSafari:u}},function(e,t){function n(){this._handlers={},this._forwards=[],Object.defineProperty(this,"events",{value:Object.freeze({on:this.on.bind(this),once:this.once.bind(this),pipe:this.pipe.bind(this)})})}Object.assign(n.prototype,{on:function(e,t){return this._handlers=this._handlers||{},(this._handlers[e]||(this._handlers[e]=[])).push(t),this._off.bind(this,e,t)},once:function(e,t){var n=this;return this.on(e,(function i(){n._off(e,i),t.apply(n,arguments)}))},pipe:function(e){return"function"==typeof e&&(e={emit:e}),this._forwards=this._forwards||[],this._forwards.push(e),this._unpipe.bind(this,e)},clear:function(){this._handlers={},this._forwards=[]},emit:function(e){var t=[].slice.call(arguments,1);this._callHandlers(e,t),this._callForwards.apply(this,arguments)},_callHandlers:function(e,t){if(this._handlers){var n=this._handlers[e];if(n&&0!==n.length)for(var i=0,r=(n=n.slice()).length;i<r;i++)n[i].apply(this,t)}},_callForwards:function(){if(this._forwards&&0!==this._forwards.length)for(var e,t=this._forwards.slice(),n=0,i=t.length;n<i&&(e=t[n]);n++)e.emit.apply(e,arguments)},_off:function(e,t){var n=this._handlers&&this._handlers[e],i=Array.isArray(n)&&n.indexOf(t);i&&i>-1&&n.splice(i,1)},_unpipe:function(e){var t=this._forwards&&this._forwards.indexOf(e);t&&t>-1&&this._forwards.splice(t,1)}}),e.exports=n},function(e,t,n){n(1);var i=n(0),r=n(5),o=n(12),s=n(9),a=n(27);function c(e,t,n){o.call(this,"ad"),this.uuid=s(),this.type=e,this.space=t,this.channel=n}i.inherit(c,o),Object.assign(c.prototype,{display$:function(){var e=this;return this._display$().then((function(){e._displayed=!0,e._emitter.emit(a.DISPLAY),e._empty&&e._emitter.emit(a.EMPTY)}))},destroy:function(){this._emitter.emit(a.DESTROY),this._destroy(),this._emitter.clear(),this._view=this._emitter=void 0,this._destroyed=!0},error:function(e){this._emitter.emit(a.ERROR,e)},_display$:r.unimplemented,_doEmpty:function(){this._empty||(this._empty=!0,this._displayed&&this._emitter.emit(a.EMPTY))},_doClick:function(){this._clicked||(this._clicked=!0,this._emitter.emit(a.CLICK))},_destroy:r.nop}),Object.defineProperties(c.prototype,{elements:{get:function(){var e=this._element||this._elements;return e&&i.asArray(e)}},empty:{get:function(){return!!this._empty}},filled:{get:function(){return!this._empty}},displayed:{get:function(){return!!this._displayed}},clicked:{get:function(){return!!this._clicked}},destroyed:{get:function(){return!!this._destroyed}}}),e.exports=c},function(e,t,n){var i,r,o,s,a=n(1),c=n(24);e.exports=window.rmaxads&&void 0!==window.rmaxads.initializedAt?window.rmaxads:window.rmaxads=(i=window.rmaxads&&window.rmaxads.cmd,r=Object.assign({adHost:window.overrideSupplyAdsHost},i&&{cmd:i},window.rmaxOptions),o=new c(r),s=!window.rmaxOptions||!1!==window.rmaxOptions.autoStart,o.autoStart=s?function(){return o.start(window.rmaxSpaceOptions)}:function(){return a.resolve()},o)},function(e,t,n){var i=n(0),r=n(2),o=n(21),s=n(14),a=n(4),c=n(50),d=n(3),u=n(51);function l(e,t){o.call(this,s.DOUBLECLICK,e,t),this._isNative="doubleclick.native"===t.type,this._setupContainer(),this._setupGPT()}i.inherit(l,o),Object.assign(l.prototype,{_getPosition:function(){var e=this.space.placement.position;return e&&"INNER"!==e?e:"REPLACE"},_getContainerTemplate:function(){return this.channel.containerTemplate||(this._isNative?this.space.targetGptContainer:this.space.targetDoubleClickContainer)||"div"},_setupContainer:function(){var e=this._ref=this.space.placement.ref,t=this._position=this._getPosition();if(!e.parentNode)switch(t){case"INNER":case"REPLACE":case"REPLACE_HIDE":case"BEFORE":case"AFTER":throw new a(a.TYPES.TARGET_DETACHED)}var n=this._getContainerHtml(this._getContainerTemplate()),i=this._container=d.buildElementsFromHtml(n)[0];this._teardown=d.placeNodes(e,t,[i])},_getContainerHtml:function(e){if(!e)throw new Error("Ad container template is required");try{return c.toHtml(e)}catch(t){throw new a(a.TYPES.INVALID_AD_CONTAINER_TEMPLATE,t,{template:e})}},_getSize:function(){if(this._isNative)return"fluid";var e=this.channel;if(e.width&&e.height)return[e.width,e.height];var t=this.space;if(t.width&&t.height)return[t.width,t.height];throw new Error("No size for GPT")},_setupGPT:function(){var e=this.channel,t=this.space._getDFPAdUnit(),n=this._getSize(),i={adx_region:"TWN"===e.spaceCountry?"TWN":"HKG"},r={};e.publisherDomain&&(r.page_url=e.publisherDomain),this._gpt=new u(this._container,{adUnit:t,size:n,targeting:i,variables:r})},_display$:function(){var e=this;return this._gpt.display$().then((function(t){t?e._elements=[e._container]:e._doEmpty()}))},_destroy:function(){try{this._gpt&&this._gpt.destroy()}catch(e){}try{this._teardown&&this._teardown()}catch(e){}}}),r.register("DoubleClickAd",l),e.exports=l},function(e,t,n){var i=n(1),r=n(10),o=n(0),s=n(17),a=n(40),c=n(12),d=n(4),u=n(41),l=n(42),h=[".rmax",".rmax-universal"].map((function(e){return"ins"+e+':not([data-rmax-space-picked="true"])'})).join(","),p="/supply/tracking/error",f="//ssp.tenmax.io";function m(e){var t,n,i;c.call(this,"rmaxads"),e=e||{},Object.defineProperty(this,"initializedAt",{value:Date.now()}),this.version=r.version,this._spaceModules={},this.spaces=[],this._spaceIndices={},this.service=new u(this),this.selectors=[],this.adHost=s.normalizeHost(e.adHost||f),this.trackingHost=e.trackingHost&&s.normalizeHost(e.trackingHost)||this.adHost,this.dfpPath=(t=e.dfpPath||this.adHost,n=t.indexOf("//ssp.tenmax.io")>=0,i=!n&&t.indexOf("//beta-ssp.tenmax.io")>=0,"/65446623"+(n?"/rmaxspace/":i?"/beta_rmaxspace/":"/dev_rmaxspace/")),this.errorTrackingEndpoint=this.trackingHost+p,a.setVersion(this._buildVersion());var o=this._hookctx.wrap.bind(this._hookctx,"cmd"),d=this,l=function(e){"function"==typeof e&&o(e)(d)};Object.defineProperty(this,"cmd",{value:Object.freeze({push:l})}),e.cmd&&Array.isArray(e.cmd)&&e.cmd.forEach(l),this._dmp(),this._emit("initialize")}o.inherit(m,c),Object.assign(m.prototype,{start:function(e){e=o.asArray(e),this._emit("before-create-spaces",e.slice());var t=this._createSpaces(e);this._emit("create-spaces",t);var n=t.map(this.startSpace.bind(this));return this._emit("start-spaces",t),i.all(n)},_buildVersion:function(){return(this.version||"unknown (no window.rmaxads.version)")+(this.isDev?"/dev":"")},_dmp:function(){a.dmp()},_createSpaces:function(e){e=e||[];var t=this._scanElements(),n=this;return Array.prototype.map.call(t,(function(t){try{return n.createSpace(t,e)}catch(e){return}})).filter((function(e){return void 0!==e}))},_scanElements:function(){return Array.prototype.filter.call(document.querySelectorAll(h),this._filterElement.bind(this))},_filterElement:function(e){var t=e.getAttribute("data-rmax-space-id");return!l[t]},createSpace:function(e,t,n){if(!e)throw new Error("Element is required.");if("object"==typeof t&&void 0===n&&(n=t,t=void 0),n=this._normalizeSpaceOptions(e,n),!(t=t||this._getTypeFromElement(e)))throw new Error("Can not determine space type.");var i=this._spaceModules[t];if(!i)throw new d(d.TYPES.MODULE_ERROR,new Error("Unrecognized space type: "+t));n.type=t;var r=new i(this,e,n);r.service=this.service.getSpaceView(r),this.spaces.push(r);var o=r.spaceId;return r.spaceIndex=this._spaceIndices[o]=void 0===this._spaceIndices[o]?0:this._spaceIndices[o]+1,this._emit("space",r),r},_normalizeSpaceOptions:function(e,t){var n={hooks:{}},i=this;return t.forEach((function(t){if(t&&i._matchOption(e,t))for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if("id"===r||"selector"===r)continue;var o=t[r];"on"===r.substring(0,2)&&"function"==typeof o?(n.hooks[r]||(n.hooks[r]=[])).push(o):n[r]=o}})),n},_matchOption:function(e,t){return t.spaceId?t.spaceId===e.getAttribute("data-rmax-space-id"):!t.selector||e.matches(t.selector)},_getTypeFromElement:function(e){var t=this.selectors.find((function(t){return e.matches(t.selector)}));return t&&t.type},startSpace:function(e){if(e.started)return i.resolve();try{return e.start$().catch((function(){}))}catch(e){return i.resolve()}},register:function(e,t){if(!t)throw new Error("invalid RMAXADS register arguments");var n=t.spaceModule,i=t.selector;this.selectors.push({type:e,selector:i}),this._registerSpaceModule(e,n)},_registerSpaceModule:function(e,t){if(!e)throw new Error("Space type is required");if(!t)throw new Error("Space module is required");this._spaceModules[e]||(this._spaceModules[e]=t)},error:function(e,t){this._error(e,t)},_error:function(e,t){a.error(this.errorTrackingEndpoint,e,t)},_getTimeSpentUrl:function(){return a.getTimeSpentUrl(this.trackingHost)}}),e.exports=m},function(e,t,n){var i=n(9);function r(e){this._propKey=e||i()}r.prototype={delete:function(e){delete e[this._propKey]},get:function(e){return e[this._propKey]},has:function(e){return Object.prototype.hasOwnProperty.call(e,this._propKey)},set:function(e,t){e[this._propKey]=t}},e.exports=r},function(e,t,n){n(1);var i=n(5);function r(e){this.type=e}Object.assign(r.prototype,{fire:function(e,t){this.fired||(this.fired=!0,this._fire(e,t))},destroy:function(){var e=this.element;e&&e.parentElement&&e.parentElement.removeChild(e)},_fire:i.unimplemented,_append:function(e,t){e.appendChild(t)}}),e.exports=r},function(e,t,n){var i=n(7);e.exports=Object.freeze(Object.assign({},i,{DISPLAY:"display",EMPTY:"empty",FAIL:"fail",DESTROY:"destroy",ERROR:"error"}))},function(e,t,n){var i=n(1),r=n(0),o=n(2),s=n(8),a=n(3),c=n(4),d=n(21),u=n(14);function l(e,t,n){if(d.call(this,u.NATIVE),!t)throw new c(c.TYPES.ILLEGAL_TEMPLATE,new Error,{template:t});this.spaceElement=e,this.template=t,this.target=n.target||e,this.position=n.position||"INNER",this.deepInto=n.deepInto}r.inherit(l,d),Object.assign(l.prototype,{_display$:function(){var e=this.target,t=this.position;if(!e.parentNode&&("REPLACE"===t||"BEFORE"===t||"AFTER"===t))throw new c(c.TYPES.TARGET_DETACHED);return this._elements=a.place[t](e,this.template,this.deepInto),this._addClickHandlers(),i.resolve()},_addClickHandlers:function(){var e=this._elements,t=this._addClickHandler.bind(this);e.forEach(t),this._removeClickHandlers=function(){e.forEach((function(e){e.removeEventListener("click",t)}))}},_addClickHandler:function(e){var t=this._doClick.bind(this);try{if(e.contentDocument)return void(e.onload=function(){e.contentDocument.addEventListener("click",t)})}catch(e){s.log("Error attaching click handler on iframe (probably using IE/Edge)")}e.addEventListener("click",t)}}),o.register("NativeAd",l),e.exports=l},function(e,t,n){var i=n(1),r=n(0),o=n(2),s=n(6),a=n(4),c=n(32);function d(e,t){c.call(this,e,t)}r.inherit(d,c),Object.assign(d.prototype,{getPlan$:function(e){var t=this._getPlanRequestUrl(e),n=this;return s.get$(t,!0).catch((function(e){throw new a(a.TYPES.PLAN_REQUEST_FAILURE,e,{requestUrl:t})})).then((function(i){try{return n._processPlanResponse(JSON.parse(i),e)}catch(e){throw new a(a.TYPES.INVALID_SSP_PLAN_RESPONSE,e,{requestUrl:t})}}))},_processPlanResponse:function(e,t){return{sessionId:e.sessionId,channels:this._processPlanChannels(e,t)}},_processPlanChannels:function(e,t){if(1===e.channels.length){var n=e.channels[0];if(n.type.startsWith("asiamax."))return this._saveAsiaMaxAdToCache(t,n.type,n),[{type:n.type,subtype:n.subtype,index:n.index}]}return e.channels},getAsiaMaxAd$:function(e,t,n){var r=n.type,o=this._getAsiaMaxAdFromCache(e,r);return o?i.resolve(o):this._requestAsiaMaxAd$(e,t,n)},_requestAsiaMaxAd$:function(e,t,n){var i=n.type,r=this._getAdRequestUrl(e,t,n),o=this;return s.get$(r,!0).catch((function(e){throw new a(a.TYPES.AD_REQUEST_FAILURE,e,{requestUrl:r})})).then((function(t){try{return o._processAdResponse(JSON.parse(t),e,i)}catch(e){throw new a(a.TYPES.INVALID_SSP_AD_RESPONSE,e,{requestUrl:r})}}))}}),o.register("JsonAdService",d),e.exports=d},function(e,t){function n(e,t){this._threshold=e.threshold,this._callback=t,this._state=!!e.initialState}n.prototype={update:function(e){if(!this._disconnected)if(this._state)e||(this._state=!1,this._callback&&this._callback(!1));else{var t=this._timeoutId,n=this;e&&!t?this._timeoutId=setTimeout((function(){n._timeoutId=void 0,n._state=!0,n._callback&&n._callback(!0)}),this._threshold):!e&&t&&(clearTimeout(t),this._timeoutId=void 0)}},disconnect:function(){this._disconnected=!0,this._timeoutId&&clearTimeout(this._timeoutId)}},Object.defineProperty(n.prototype,"state",{get:function(){return this._state}}),e.exports=n},function(e,t,n){var i=n(20);function r(e){Object.defineProperty(this,"type",{value:e}),this._emitter=new i}r.prototype={appendChild:function(){for(var e=0,t=arguments.length;e<t;e++)this._appendChild(arguments[e])},destroy:function(){this._emitter.clear(),this._destroyed=!0},_emit:function(e,t){t=t||{},this.assetKey&&(t.assetKey=this.assetKey),this._emitter.emit(e,t)},_appendChild:function(e){var t=this.childContainer||this.element;if(!t)throw new Error("No child container available to append.");var n=e instanceof Node?e:e.isWidget||e.element?e.element:void 0;if(!n)throw new Error("Host element not found on child object: "+e);t.appendChild(n)}},Object.defineProperty(r.prototype,"isWidget",{value:!0}),Object.defineProperty(r.prototype,"events",{get:function(){return this._emitter.events}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return!!this._destroyed}}),e.exports=r},function(e,t,n){var i=n(9),r=n(0),o=n(2),s=n(6),a=n(3);function c(e,t){this._service=e,this._space=t,e.registerSpace(t)}function d(e,t){this._rmaxads=e,this.type=t,this._asiaMaxAdCache={}}Object.assign(c.prototype,{getPlan$:function(){return this._service.getPlan$(this._space)},getAsiaMaxAd$:function(e,t){return this._service.getAsiaMaxAd$(this._space,e,t)},unregister:function(){this._service.unregisterSpace(this._space)},destroy:function(){this.unregister()}}),d.SpaceView=c,Object.assign(d.prototype,{getSpaceView:function(e){return new c(this,e)},getPlan$:function(){throw new Error("Unimplemented")},getAsiaMaxAd$:function(){throw new Error("Unimplemented")},registerSpace:function(){},unregisterSpace:function(){},destroy:function(){this._asiaMaxAdCache=void 0},_getApiHost:function(){return this._rmaxads.adHost},_getApiUrl:function(e,t){return t.cacheBuster=i(),this._getApiHost()+e+s.encodeQueryParams(t)},_getPlanRequestUrl:function(e){return this._getApiUrl(this._getPlanRequestPath(e),this._getPlanRequestParams(e))},_getPlanRequestPath:function(e){return this._planRequestPath},_getPlanRequestParams:function(e){return Object.assign({rmaxSpaceId:e.spaceId},this._getCommonParams(e),this._getClickPrefixParams(e))},_getCommonParams:function(e){return r.trim({referer:e.hostObject.hrefAsReferer,slotWidth:e.width,slotHeight:e.height,lang:a.getLang()})},_processPlanResponse:function(e,t){return e},_getAdRequestUrl:function(e,t,n){return this._getApiUrl(this._getAdRequestPath(e,n),this._getAdRequestParams(e,t,n))},_getAdRequestPath:function(e,t){return this._adRequestPath},_getAdRequestParams:function(e,t,n){return r.trim({rmaxSpaceId:e.spaceId,sessionId:t,type:n.type,id:n.id,subtype:n.subtype,index:n.index,dealIds:n.dealIds,ics:n.ics},this._getCommonParams(e),this._getClickPrefixParams(e))},_getClickPrefixParams:function(e){return e._clickPrefix?{clickprefix:e._clickPrefix}:void 0},_processAdResponse:function(e,t,n){return e},_getAsiaMaxAdFromCache:function(e,t){return this._asiaMaxAdCache[e.uuid+":"+t]},_saveAsiaMaxAdToCache:function(e,t,n){this._asiaMaxAdCache[e.uuid+":"+t]=n}}),o.register("BaseAdService",d),e.exports=d},function(e,t,n){var i=n(5),r=Object.freeze({_bindVideoPlayingEvents:function(e){var t=this._updatePlayingState.bind(this,e,!0),n=this._updatePlayingState.bind(this,e,!1);e.addEventListener("playing",t,!1),e.addEventListener("pause",n,!1),this._unbindVideoPlayingEvents=function(){e.removeEventListener("playing",t,!1),e.removeEventListener("pause",n,!1)}},_unbindVideoPlayingEvents:i.nop,_updatePlayingState:function(e,t){this._playing!==t&&(this._playing=t,this.element.classList.add(t?"playing":"paused"),this.element.classList.remove(t?"paused":"playing"))}});e.exports=r},function(e,t){e.exports={XML_PARSING_ERROR:{code:"100",message:"XML parsing error"},VAST_SCHEMA_ERROR:{code:"101",message:"VAST schema validation error"},VAST_VERSION_NOT_SUPPORTED:{code:"102",message:"VAST version of response not supported"},AD_TYPE_NOT_EXPECTING:{code:"200",message:"Video player received an Ad type that it was not expecting and/or cannot display"},VIDEO_LINEARITY_AND_EXPECTING_LINEARTIY_DIFFERENT:{code:"201",message:"Video player expecting different linearity"},VIDEO_DURATION_AND_EXPECTING_DURATION_DIFFERENT:{code:"202",message:"Video player expecting different duration"},VIDEO_SIZE_AND_EXPECTING_SIZE_DIFFERENT:{code:"203",message:"Video player expecting different size"},AD_CATEGORY_WAS_REQUIRED:{code:"204",message:"Ad category was required but not provided"},GENERAL_WRAPPER_ERROR:{code:"300",message:"General wrapper error"},TIMEOUT_OF_VAST_URI_IN_WRAPPER:{code:"301",message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player."},WRAPPER_LIMIT_REACHED:{code:"302",message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},NO_VAST_RESPONSE_IN_WRAPPERS:{code:"303",message:"No VAST response after one or more Wrappers"},INLINE_RESPONSE_TIMEOUT:{code:"304",message:"InLine response returned ad unit that failed to result in ad display within defined time limit"},GENERAL_LINEAR_ERROR:{code:"400",message:"General Linear error. Video player is unable to display the Linear Ad"},MEDIAFILE_NOT_FOUND:{code:"401",message:"File not found. Unable to find Linear/MediaFile from URI"},TIMEOUT_OF_MEDIAFILE_URI:{code:"402",message:"Timeout of MediaFile URI"},MEDIAFILE_ELEMENT_NOT_FOUND:{code:"403",message:"Couldn’t find MediaFile that is supported by this video player, based on the attributes of the MediaFile element"},DISPLAYING_MEDIAFILE_ERROR:{code:"405",message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn’t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc"},CONDITIONAL_AD_REJECTED:{code:"408",message:"Conditional ad rejected"},GENERAL_NOLINEARADS_ERROR:{code:"500",message:"General NonLinearAds error"},UNABLE_DISPLAY_NOLINEARAD:{code:"501",message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)"},UNABLE_FETCH_NONLINEARADS:{code:"502",message:"Unable to fetch NonLinearAds/NonLinear resource"},COULDNOT_FIND_NONLINEAR_TYPE:{code:"503",message:"Couldn’t find NonLinear resource with supported type"},GENERAL_COMPANIONAD_ERROR:{code:"600",message:"General CompanionAds error"},COMPANIONAD_DIMENSIONS_NOT_FIT:{code:"601",message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)"},UNABLE_DISPLAY_COMPANIONAD:{code:"602",message:"Unable to display required Companion"},UNABLE_FETCH_COMPANIONADS:{code:"603",message:"Unable to fetch CompanionAds/Companion resource"},COULDNOT_FIND_COMPANION_TYPE:{code:"604",message:"Couldn’t find Companion resource with supported type"},UNDEFINED_ERROR:{code:"900",message:"Undefined Error"},GENERAL_VPAID_ERROR:{code:"901",message:"General VPAID error"}}},function(e,t,n){var i,r,o=n(8);function s(){return!document[i]}void 0!==document.hidden?(i="hidden",r="visibilitychange"):void 0!==document.webkitHidden&&(i="webkitHidden",r="webkitvisibilitychange");var a=[];function c(){var e=s();a.forEach((function(t){t(e)}))}e.exports={isVisible:s,observe:function(e){var t=function(e){var t;return function(n){if(n!==t){try{e(n)}catch(e){o.error(e)}t=n}}}(e);return 0===a.length&&document.addEventListener(r,c,!1),a.push(t),setTimeout((function(){t(s())}),0),function(){!function(e){var t=a.indexOf(e);t<0||(a.splice(t,1),0===a.length&&document.removeEventListener(r,c,!1))}(t)}}}},function(e,t,n){n(1);"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e.apply(this,[this[t],t,this])});"function"!=typeof Array.prototype.indexOf&&Object.defineProperty(Array.prototype,"indexOf",{value:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}}),"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Array.prototype.find&&Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=0;r<n;r++){var o=t[r];if(e.call(i,o,r,t))return o}}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},writable:!0,configurable:!0}),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e})},function(e,t,n){(function(t){n(1);!function(){"use strict";var n,i,r,o=null,s="object"==typeof window,a=s?window:t,c=a.Promise,d=a.process,u=Array,l=0,h=1,p=2,f="iterator",m="species",_="Symbol("+m+")",v="return",y="_uh",g="Invalid argument",E="Chaining cycle detected for promise",b="rejectionHandled",w="unhandledRejection",A={e:o},T=function(){},x=a.Symbol||{},R=s?function(e){c?new c((function(e){e()})).then(e):setTimeout(e)}:d.nextTick,O=function(e){var t;if(!S(this)||this._s!==n)throw D("Invalid this");if(this._s=p,e!==T){if(!I(e))throw D(g);(t=L(e)(B(this,h),B(this,l)))===A&&H(this,l,t.e)}};function k(){return x[m]||_}function S(e){return e&&"object"==typeof e}function I(e){return"function"==typeof e}function C(e,t,n){if(!t(e))throw D(n)}function P(){try{return i.apply(r,arguments)}catch(e){return A.e=e,A}}function L(e,t){return i=e,r=t,P}function N(e,t){var i=u(e),r=0;function o(){for(var o=0;o<r;)t(i[o],i[o+1]),i[o++]=n,i[o++]=n;r=0,i.length>e&&(i.length=e)}return function(e,t){i[r++]=e,i[r++]=t,2===r&&R(o)}}function V(e,t){var n,i,r,o,s=0;if(!e)throw D(g);var a=e[x[f]];if(I(a))i=a.call(e);else{if(!I(e.next)){if(e instanceof u){for(n=e.length;s<n;)t(e[s],s++);return s}throw D(g)}i=e}for(;!(r=i.next()).done;)if((o=L(t)(r.value,s++))===A)throw I(i[v])&&i[v](),o.e;return s}function D(e){return new TypeError(e)}O.default=O,function(e,t){for(var n in t)e.prototype[n]=t[n]}(O,{then:function(e,t){if(void 0===this._s)throw D();return function(e,t,n,i){I(n)&&(t._onFulfilled=n);I(i)&&(e[y]&&U(b,e),t._onRejected=i);e[e._pCount++]=t,e._s!==p&&M(e,t);return t}(this,F((n=O,(i=this.constructor)&&i[k()]||n)),e,t);var n,i},catch:function(e){return this.then(n,e)},finally:function(e){return this.then((function(t){return O.resolve(e()).then((function(){return t}))}),(function(t){return O.resolve(e()).then((function(){throw t}))}))},_pCount:0,_pre:o,_Yaku:1}),O.resolve=function(e){return $(e)?e:W(F(this),e)},O.reject=function(e){return H(F(this),l,e)},O.race=function(e){var t=this,n=F(t),i=function(e){H(n,h,e)},r=function(e){H(n,l,e)},o=L(V)(e,(function(e){t.resolve(e).then(i,r)}));return o===A?t.reject(o.e):n},O.all=function(e){var t,n=this,i=F(n),r=[];function o(e){H(i,l,e)}return(t=L(V)(e,(function(e,s){n.resolve(e).then((function(e){r[s]=e,--t||H(i,h,r)}),o)})))===A?n.reject(t.e):(t||H(i,h,[]),i)},L((function(){Object.defineProperty(O,k(),{get:function(){return this}})}))(),O._Yaku=1;var M=N(999,(function(e,t){var i,r;(r=e._s?t._onFulfilled:t._onRejected)!==n?(i=L(q)(r,e._v))!==A?W(t,i):H(t,l,i.e):H(t,e._s,e._v)})),j=N(9,(function(e){(function e(t){if(t._umark)return!0;t._umark=!0;var n,i=0,r=t._pCount;for(;i<r;)if((n=t[i++])._onRejected||e(n))return!0})(e)||(e[y]=1,U(w,e))}));function U(e,t){var n="on"+e.toLowerCase(),i=a[n];d&&d.listeners(e).length?e===w?d.emit(e,t._v,t):d.emit(e,t):i&&i({reason:t._v,promise:t})}function $(e){return e&&e._Yaku}function F(e){return $(e)?new e(T):(t=new e((function(e,r){if(t)throw D();n=e,i=r})),C(n,I),C(i,I),t);var t,n,i}function B(e,t){return function(n){t===h?W(e,n):H(e,t,n)}}function q(e,t){return e(t)}function H(e,t,n){var i=0,r=e._pCount;if(e._s===p)for(e._s=t,e._v=n,t===l&&j(e);i<r;)M(e,e[i++]);return e}function W(e,t){if(t===e&&t)return H(e,l,D(E)),e;if(t!==o&&(I(t)||S(t))){var n=L(Y)(t);if(n===A)return H(e,l,n.e),e;I(n)?$(t)?z(e,t,n):R((function(){z(e,t,n)})):H(e,h,t)}else H(e,h,t);return e}function Y(e){return e.then}function z(e,t,n){var i=L(n,t)((function(n){t&&(t=o,W(e,n))}),(function(n){t&&(t=o,H(e,l,n))}));i===A&&t&&(H(e,l,i.e),t=o)}try{e.exports=O}catch(e){a.Yaku=O}}()}).call(this,n(38))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){var i=n(10),r=n(9),o=n(3),s=n(6),a=n(17),c=n(8),d=n(4),u=o.elementBuilder,l=i.version;var h=1e9;e.exports={error:function(e,t,n){try{null==t&&(t=new Error),d.isAdcodeError(t)||(t=new d(d.TYPES.GENERAL_ERROR,t));var i=t.type,r=t.cause,o=i.code||d.TYPES.GENERAL_ERROR.code,u=t.context?Object.assign({},t.context):{};if(u.message=i.message+(r&&" caused by: "+function(e){return e instanceof window.Event?"["+e.constructor.name+"] "+e.type+": "+e.message:""+e}(r)||""),o===d.TYPES.GENERAL_ERROR.code&&r&&r.stack,!i.sampling||Math.random()<i.sampling){var h=Object.assign({version:l,referer:a.getHostObject().hrefAsReferer,errorCode:o,errorContext:u},n||{});s.post(e,h)}}catch(e){c.error(e)}t&&t.isUserError?window.console.error(t.cause||t):(t&&t.isWarning?c.warn:c.error)(t,n)},dmp:function(){if(!document.querySelector(".acvzdmp")){var e=function(e,t,n){t=t||document.body;var i=u("img",{src:n+e,$display:"none"});return t.appendChild(i),i}("/p/b734323b-0532-40a6-8d4e-782e1c96bd3a?random="+Math.floor(h*Math.random()),document.body,"https://dmp.tenmax.io");return void 0!==e&&(e.className="acvzdmp"),e}},getTimeSpentUrl:function(e){return e+"/supply/tracking/time/[rmaxSpaceId]/[type]/[cost]?t="+(new Date).getTime()+"&cacheBuster="+r()},setVersion:function(e){l=e}}},function(e,t,n){var i=n(4);function r(e){this._rmaxads=e,this._mods=[]}Object.assign(r.prototype,{registerModule:function(){var e=this._mods,t=this;return Array.prototype.forEach.call(arguments,(function(n){e.push({mod:n}),n.modName&&(t[n.modName]=n)})),this},getSpaceView:function(e){return this._getModule(e).getSpaceView(e)},destroy:function(){this._mods.forEach((function(e){e.instance&&e.instance.destroy(),e.mod.destroy&&e.mod.destroy()})),this._mods=void 0},_getModule:function(e){for(var t,n=e.element,r=this._mods,o=0,s=r.length;o<s&&(t=r[o]);o++){var a=t.mod;if(n.matches(a.selector))return t.instance||(t.instance=new a(this._rmaxads))}throw new i(i.MODULE_ERROR,new Error("Cannot determine ad service module."))}}),e.exports=r},function(e,t){e.exports={"473712dd87ca49ec":!0,"4ebc55d4dd614a79":!0,d6747acd8ca1482a:!0,"0de27a70903042ca":!0,b3916515dc7b4240:!0,d55b69b8ad4944e1:!0,bc14f6f668784f9a:!0,"144724ecebbb4431":!0,"32fc460cdf294227":!0}},function(e,t){var n=Object.freeze({isEmpty:!0,isStrcitlyEmpty:!0,top:NaN,left:NaN,bottom:NaN,right:NaN,width:0,height:0,area:0,intersect:function(){return n},offset:function(){return n},contain:function(){return!1},equals:function(e){return e===n}});function i(e){if(e===n||e instanceof i)return e;if(e instanceof Window)e={top:0,left:0,bottom:e.innerHeight,right:e.innerWidth};else if(e instanceof Element&&0===(e=e.getBoundingClientRect()).top&&0===e.bottom&&0===e.left&&0===e.right&&0===e.width&&0===e.height)return n;if(this.top=e.top,this.left=e.left,this.bottom=e.bottom,this.right=e.right,this.width=this.right-this.left,this.height=this.bottom-this.top,this.isEmpty=this.width<=0||this.height<=0,this.isEmpty&&(this.width<0||this.height<0))return n;this.area=this.isEmpty?0:this.width*this.height,Object.freeze(this)}i.strictlyEmpty=function(){return n},i.prototype={isStrcitlyEmpty:!1,intersect:function(e){return e?e.isStrcitlyEmpty?i.strictlyEmpty():new i({top:Math.max(this.top,e.top),left:Math.max(this.left,e.left),bottom:Math.min(this.bottom,e.bottom),right:Math.min(this.right,e.right)}):this},offset:function(e){var t=e.top||e.y||0,n=e.left||e.x||0;return new i({top:this.top+t,left:this.left+n,bottom:this.bottom+t,right:this.right+n})},contain:function(e){return!(e=void 0!==e.x&&void 0!==e.y?new i({left:e.x,right:e.x,top:e.y,bottom:e.y}):new i(e)).isStrcitlyEmpty&&this.top<=e.top&&this.bottom>=e.bottom&&this.left<=e.left&&this.right>=e.right},equals:function(e){return e&&e!==n&&this.top===e.top&&this.left===e.left&&this.bottom===e.bottom&&this.right===e.right}},i.intersect=function(){return Array.prototype.reduce.call(arguments,(function(e,t){return t=new i(t),e&&e.intersect(t)||t}))},e.exports=i},function(e,t,n){var i=n(0),r=n(9),o=n(12),s=n(4),a=n(45),c=n(46);function d(e){o.call(this,"tracker-manager"),this._container=e||document.body,this._trackers={}}i.inherit(d,o),Object.assign(d.prototype,{get:function(e){return this._trackers&&this._trackers[e]||[]},getTypes:function(){return this._trackers?Object.keys(this._trackers):[]},getAll:function(){var e=this._trackers;return this.getTypes().reduce((function(t,n){return t.concat(e[n]||[])}),[])},add:function(e,t){t&&0!==t.length&&(Array.isArray(t)||(t=[t]),0!==(t=t.map(this._processTracker.bind(this)).filter((function(e){return void 0!==e}))).length&&(this._trackers[e]=void 0!==this._trackers[e]?this._trackers[e].concat(t):t))},fire:function(e,t,n){var i=this._emit.bind(this),r=(this._trackers[e]||[]).filter((function(e){return!e.fired}));r.forEach((function(r){try{r.fire(t,n)}catch(t){i("error",new s(s.TYPES.TRACKER_ERROR,t,{eventType:e,trackerUrl:r}))}})),i("fire",e,r,t,n)},destroy:function(){var e=this._trackers;e&&Object.keys(e).forEach((function(t){(e[t]||[]).forEach((function(e){e.destroy()}))})),this._trackers=void 0,o.prototype._destroy.call(this)},_processArgs:function(e){return Object.assing(e,{timestamp:Date.now.bind(Date),cachebuster:r})},_processTracker:function(e){switch("string"==typeof e&&(e={type:"pixel",url:e}),void 0===e.type&&(e.type="iframe"),e.type){case"pixel":return new a(this._container,e.url);case"iframe":return new c(e.content)}}}),e.exports=d},function(e,t,n){var i=n(0),r=n(6),o=n(26);function s(e,t){o.call(this,"pixel"),this.container=e,this.url=t}i.inherit(s,o),Object.assign(s.prototype,{_fire:function(e,t){var n=this.renderedUrl=this._renderUrl(this.url,e,t),i=this.element=document.createElement("img");i.style.display="none",i.src=n,this._append(this.container,i)},_renderUrl:function(e,t,n){t=t||{},e=e.replace(/\[([^\[\]]*)\]/g,(function(e,n){var i=t[n];if("function"==typeof i)try{i=i()}catch(e){}return"string"==typeof i||"boolean"==typeof i||"number"==typeof i?i:e}));var i=n&&Object.keys(n);if(!i||0===i.length)return e;var o=r.encodeQueryParams(n);return e+(e.lastIndexOf("?")<0?o:"&"+o.substring(1))},destroy:function(){this.element&&this.element.removeAttribute("src"),o.prototype.destroy.apply(this,arguments)}}),e.exports=s},function(e,t,n){var i=n(0),r=n(3),o=n(26);function s(e){o.call(this,"iframe"),this.content=e}i.inherit(s,o),Object.assign(s.prototype,{_fire:function(e,t){var n=this.element=document.createElement("iframe");n.style.display="none",n.style.width=n.style.height="0",r.getLoadResult$(n),n.srcdoc=this.content.replace("</scr'+'ipt>","<\/script>"),this._append(document.body,n)}}),e.exports=s},function(e,t){e.exports={INITIALIZED:"initialized",STARTED:"started",PLAN_REQUESTED:"plan requested",PLAN_RECEIVED:"plan received",ASIAMAX_AD_REQUESTED:"asiamax ad requested",ASIAMAX_AD_RECEIVED:"asiamax ad received",AD_CREATED:"ad created",AD_DISPLAYED:"ad displayed",AD_REQUEST_QUEUED:"request queued",AD_REQUEST_SENT:"request sent",AD_RESPONSE_RECEIVED:"response received"}},function(e,t,n){var i=n(1),r=n(0),o=n(2),s=n(3),a=n(12),c=n(4);function d(e,t){a.call(this,"placement-manager"),t=t||{},this._doc=t.document||document,this._fallback=e,this._selector=t.selector,this._index=t.index,this._rootSelector=t.rootSelector,Object.defineProperty(this,"position",{value:t.position||"INNER"});var n=this;Object.defineProperty(this,"ref$",{value:new i((function(e,t){n._resolveRef=e,n._rejectRef=t}))})}r.inherit(d,a),Object.assign(d.prototype,{start:function(){if(this._selector){if(!this._trySetRef()){var e=s.handleDOMInserted(this._getRootElement(),this._trySetRef.bind(this));this.ref$.then(e,e)}}else this._setRef(this._fallback)},_getRootElement:function(){var e=this._rootSelector;if(!e){var t=new Error("Ref element not found, and root selector is absent");throw new c(c.TYPES.SPACE_ELEMENT_NOT_FOUND,t,{selector:this._selector,index:this._index})}var n=this._doc.querySelector(e);if(!n){t=new Error("Ref element not found, and root element is also not found");throw new c(c.TYPES.SPACE_ELEMENT_NOT_FOUND,t,{selector:this._selector,index:this._index,rootSelector:e})}return n},_trySetRef:function(){var e=this._computeRef();return e&&this._setRef(e),e},_setRef:function(e){Object.defineProperty(this,"ref",{value:e}),this._emit("ref",e),this._resolveRef(e)},_computeRef:function(){var e;try{e=this._doc.querySelectorAll(this._selector)}catch(e){throw new c(c.TYPES.SPACE_ELEMENT_NOT_FOUND,e,{selector:this._selector,index:this._index})}return e[-1===Number(this._index)?e.length-1:this._index||0]}}),o.register("PlacementManager",d),e.exports=d},,function(e,t){var n={TAG:0,ID:1,CLASS:2,ATTR_KEY:3,ATTR_VALUE:4,NONE:5};function i(e){var t,i=e.length,r=function(e,t){for(var n,i=e.split(""),r=i.length,o=!1,s=!1,a=0;a<r;a++)n=i[a],o?'"'===n?o=!1:i[a]=t:s?"'"===n?s=!1:i[a]=t:'"'===n?o=!0:"'"===n&&(s=!0);return i.join("")}(e,"*"),o=0,s=n.TAG,a={tag:"div"};function c(){throw new Error("Illegal syntax: "+e)}function d(i,r){var c=e.substring(o,r);switch(s){case n.TAG:""!==c&&(a.tag=c);break;case n.ID:a.id=c;break;case n.CLASS:(a.classes||(a.classes=[])).push(c);break;case n.ATTR_KEY:t=c.trim();break;case n.ATTR_VALUE:(a.attributes||(a.attributes={}))[t]=function(e){if(!e||e.length<2)return e;var t=e[0],n=e.length-1;return"'"!==t&&'"'!==t||t!==e[n]?e:e.substring(1,n)}(c.trim()).trim(),t=void 0}o=r+1,s=i}for(var u=0;u<i;u++)switch(r[u]){case"#":d(n.ID,u);break;case".":d(n.CLASS,u);break;case"[":case"(":d(n.ATTR_KEY,u);break;case"=":s!==n.ATTR_KEY&&c(),d(n.ATTR_VALUE,u);break;case"]":case")":s!==n.ATTR_VALUE&&c(),d(n.NONE,u)}return d(),a}e.exports={toElement:function(e,t){var n=i(e);t=t||document.createElement(n.tag),n.id&&(t.id=n.id),n.classes&&t.classList.add.apply(t.classList,n.classes);var r=n.attributes||{};return Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),t},toHtml:function(e){var t=i(e),n=t.tag,r=Object.assign({},t.id&&{id:t.id},t.classes&&{class:t.classes.join(" ")},t.attributes);return"<"+n+Object.keys(r).reduce((function(e,t){return e+" "+t+'="'+r[t]+'"'}),"")+"></"+n+">"}}},function(e,t,n){var i,r,o,s=n(1),a=n(0),c=n(11),d=n(6),u=n(25),l=new(window.WeakMap||u);i=window,r=l,(o=i.googletag=i.googletag||{}).cmd=o.cmd||[],o.cmd.push((function(){o.pubads().addEventListener("slotRenderEnded",(function(e){var t=r.get(e.slot);t&&t._handleRenderEnd(e)})),o.pubads().enableSingleRequest(),o.pubads().collapseEmptyDivs(!0),o.pubads().enableAsyncRendering(),o.enableServices()}));var h=Math.pow(10,9),p=Math.pow(10,8),f=Math.floor(Math.random()*(h-p))+p,m=0;var _=["advertiserId","campaignId","creativeId","isEmpty","lineItemId","size"];function v(e,t){if(c.call(this,"gpt"),this._options=t=t||{},this._element=e,!e)throw new Error("Element is required.");this._elementId=e.id||"div-gpt-ad-"+f+"-"+m++,this._validate(t)}a.inherit(v,c),Object.assign(v.prototype,{display$:function(){var e=this,t=this._options;!function(){var e=window.googletag;e&&e.apiReady?s.resolve():d.loadJS$("//www.googletagservices.com/tag/js/gpt.js","async")}();var n=this._element,i=this._elementId;n.setAttribute("id",i);var r=new s((function(t,n){e._resolveRendered=t})),o=window.googletag;return o.cmd.push((function(){var n=e._slot=o.defineSlot(t.adUnit,t.size,i);l.set(n,e);var r=t.targeting||{};Object.keys(r).forEach((function(e){n.setTargeting(e,r[e])}));var s=t.variables||{};Object.keys(s).forEach((function(e){n.set(e,s[e])})),n.addService(o.pubads()),o.display(i);try{o.pubads().isInitialLoadDisabled()&&o.pubads().refresh([n])}catch(e){}})),r},destroy:function(){c.prototype.destroy.apply(this,arguments)},_validate:function(e){if("string"!=typeof e.adUnit)throw new Error("adUnit is required.");if(!e.size)throw new Error("size is required.")},_handleRenderEnd:function(e){var t=this;_.forEach((function(n){t[n]=e[n]})),this._resolveRendered&&this._resolveRendered(!e.isEmpty)}}),e.exports=v},,function(e,t,n){var i=n(0),r=n(5),o=n(79);function s(e){o.call(this,e)}i.inherit(s,o),Object.assign(s.prototype,{_load$:function(e){var t=this._loadWithElement$(e);return this._element=t[0],t[1]},_loadWithElement$:r.unimplemented}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element}}),e.exports=s},function(e,t,n){var i=n(18),r=n(7),o=Object.freeze({monitorVisibility:function(e){if(this._destroyed)return this;var t=(e=e||{}).ref||this.element,n={visibilityThreshold:e.visibilityThreshold||.5,timeoutThreshold:e.timeoutThreshold||1e3};return(this.visibilityObserver=new i.ViewabilityObserver(t,n)).fulfilled$.then(this._doVisible.bind(this)),this},_doVisible:function(e){this.visible||(this.visible=!0,this._fireVisibleEvent(e),this.unmonitorVisibility())},_fireVisibleEvent:function(e){this._visibleFired||(this._visibleFired=!0,this._emit(r.VISIBLE,e?{undetermined:!0}:{}))},unmonitorVisibility:function(){this.visibilityObserver&&(this.visibilityObserver._visibilityObserver.disconnect(),this.visibilityObserver=void 0)}});e.exports=o},function(e,t,n){var i=n(5),r=Object.freeze({_bindVideoVolumeEvents:function(e){var t=this._updateVolumeState.bind(this,e);e.addEventListener("volumechange",t,!1),this._unbindVideoVolumeEvents=function(){e.removeEventListener("volumechange",t,!1)}},_unbindVideoVolumeEvents:i.nop,_updateVolumeState:function(e){var t=!e.muted;this._volumeOn!==t&&(this._volumeOn=t,this.element.classList.add(t?"volume-on":"volume-off"),this.element.classList.remove(t?"volume-off":"volume-on"))}});e.exports=r},function(e,t,n){var i=n(0),r=n(6),o=n(11),s=n(59),a=n(60);function c(e){o.call(this,"logo"),e=e||{};var t=this._getContainerElement(e);this._setupElement(e,t),this._bindControlEvents(),t&&t.appendChild(this.element)}i.inherit(c,o),Object.assign(c.prototype,{_getContainerElement:function(e){var t=e.container;return t&&(t instanceof HTMLElement?t:t.isWidget||t.element instanceof HTMLElement?t.element:void 0)},_setupElement:function(e,t){r.installCSS("tenmax-logo",a);var n=this.element=document.createElement("span");n.setAttribute("data-rmax-widget-type","logo"),n.id="tenmax-logo",n.innerHTML=s,this._setupMenuStyle(e,t)},_bindControlEvents:function(){this.element.querySelector(".icon").addEventListener("click",this.openMenu.bind(this)),this.element.querySelector(".close-btn").addEventListener("click",this.closeMenu.bind(this))},_setupMenuStyle:function(e,t){var n=e.width||t.clientWidth||100,i=e.height||t.clientHeight||100,r=i>=150||n/i<=2.45,o=r&&n>=250&&Math.max(n,500)*(i-165)>=2e4,s=r?n<=170||i<=130:n<=340,a=this.element.querySelector(".menu");a.classList.add(r?"vertical":"horizontal"),o&&a.classList.add("descriptive"),s&&a.classList.add("small-logo")},openMenu:function(){this.element.classList.add("open")},closeMenu:function(){this.element.classList.remove("open")},destroy:function(){o.prototype.destroy.apply(this,arguments)}}),e.exports=c},function(e,t,n){var i=n(34).UNDEFINED_ERROR;function r(e){e||(e=i);var t=e.code,n=e.message;this.name="VAST Error: "+t,this.message=n,this.stack=(new Error).stack,this.errorCode=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){n(22).autoStart()},function(e,t){e.exports='<span class="icon"></span>\n<div class="menu">\n  <div class="close-btn"></div>\n  <a class="menu-item home" href="//www.tenmax.io" target="_blank">\n    <img src="//tenmax-static.cacafly.net/dsp/logo_tenmax.png">\n  </a>\n  <div class="menu-item description">TenMax 致力於尖端的數位廣告技術開發，根據用戶的瀏覽行為，TenMax 能建立精準廣告服務搭起廣告主與用戶的溝通橋樑。 歡迎立即聯繫我們，拓展您的事業！</div>\n  <div class="menu-item contact">\n    <a href="//www.tenmax.io/contact-us" target="_blank">購買<br>TenMax 廣告</a>\n  </div>\n  <div class="menu-item blog">\n    <a href="//www.tenmax.io/blog" target="_blank">更多資訊<br>和選項</a>\n  </div>\n  <div class="menu-item privacy">\n    <a href="//www.tenmax.io/privacy-policy" target="_blank">隱私權<br>宣言</a>\n  </div>\n</div>\n'},function(e,t){e.exports="#tenmax-logo {\n  position: absolute;\n  z-index: 1;\n  right: 0px;\n  top: 0px;\n}\n\n/* icon */\n#tenmax-logo > .icon {\n  display: block;\n  height: 16px;\n  width: 20px;\n  transition: width 0.2s;\n  background: url(//tenmax-static.cacafly.net/dsp/icon2x.png) 0 0 no-repeat;\n  background-size: 100% 100%;\n  cursor: pointer;\n}\n#tenmax-logo > .icon:hover {\n  background-image: url(//tenmax-static.cacafly.net/dsp/icon_full2x.png);\n  width: 67px;\n}\n\n/* menu */\n#tenmax-logo > .menu {\n  display: none;\n  background-color: #FFF;\n  box-shadow: 2px 2px 3px #888;\n  border: 1px solid #0FA0B2;\n  margin-left: 5px;\n  border-bottom-left-radius: 7px;\n  letter-spacing: 1px;\n  font-family: Arial, \"微軟正黑體\", sans-serif;\n}\n#tenmax-logo.open > .menu {\n  display: block;\n}\n#tenmax-logo.open > .icon {\n  display: none;\n}\n\n\n/* menu: close button */\n#tenmax-logo > .menu .close-btn {\n  float: right;\n  margin: 5px;\n  background: url(//tenmax-static.cacafly.net/dsp/bt_close.png) 0 0 no-repeat;\n  width: 17px;\n  height: 17px;\n  opacity: 0.7;\n  cursor: pointer;\n}\n#tenmax-logo > .menu .close-btn:hover {\n  opacity: 1;\n}\n\n/* menu: layout */\n#tenmax-logo > .menu::after,\n#tenmax-logo > .menu.vertical .menu-item::before,\n#tenmax-logo > .menu.vertical .menu-item::after {\n  content: '';\n  display: block;\n  clear: both;\n}\n#tenmax-logo > .menu.vertical {\n  max-width: 400px;\n}\n#tenmax-logo > .menu.horizontal {\n  min-width: 310px;\n}\n#tenmax-logo > .menu.horizontal .menu-item {\n  float: left;\n}\n#tenmax-logo > .menu.horizontal .menu-item a {\n  margin-top: 2px;\n  margin-right: 2px;\n  line-height: 17px;\n  padding: 2px 4px;\n  text-align: center;\n}\n#tenmax-logo > .menu.vertical .menu-item br {\n  display: none;\n}\n#tenmax-logo > .menu.descriptive .menu-item.description {\n  display: block;\n}\n#tenmax-logo > .menu.small-logo .menu-item.home > img {\n  width: 60px;\n}\n#tenmax-logo > .menu.horizontal.small-logo .menu-item.home {\n  margin-top: 5px;\n}\n\n/* menu-item */\n#tenmax-logo > .menu .menu-item.home {\n  display: inline-block;\n  padding: 5px 10px;\n}\n#tenmax-logo > .menu .menu-item.home > img {\n  width: 120px;\n  padding-top: 5%;\n}\n#tenmax-logo > .menu .menu-item.description {\n  display: none;\n  font-size: 12px;\n  line-height: 15px;\n  padding: 10px;\n  padding-top: 5px;\n  color: #333;\n}\n#tenmax-logo > .menu .menu-item a {\n  display: block;\n  font-size: 12px;\n  margin: 3px 0;\n  padding: 0 10px;\n  line-height: 24px;\n  text-decoration: none;\n  background-color: #EFEFEF;\n  color: #0FA0B2;\n}\n#tenmax-logo > .menu .menu-item a:hover {\n  display: block;\n  background-color: #0FA0B2;\n  color: #FFF;\n  -webkit-box-shadow: inset 0 0 8px #000;\n  box-shadow: inset 0 0 8px #000;\n  text-decoration: none;\n}\n"},,,,,,,,,,,,,,function(e,t,n){var i=n(22),r=n(13),o=n(75),s=n(93);i.register(r.UNIVERSAL,{selector:'.rmax[data-rmax-space-type="UNIVERSAL"], .rmax-universal[data-rmax-space-type="UNIVERSAL"]',spaceModule:o}),i.service.registerModule(s)},function(e,t,n){var i=n(0),r=n(13),o=n(15),s=n(14),a=n(76),c=n(28),d=n(23),u=n(7),l=n(16).MEASUREMENT_TYPE,h=0;function p(e,t,n){n=n||{},o.call(this,e,n.type||r.UNIVERSAL,t,n),this._assertSize()}i.inherit(p,o),Object.assign(p.prototype,{_createAd:function(e){switch(this._setupElement(e),e.type){case"asiamax.combo":return this._createComboAd(e);case"doubleclick.banner":return new d(this,e);case"pmp":case"custom-tag":return new c(this.element,e.content,{target:this.element,position:"INNER",deepInto:0});default:throw this._unrecognizedChannelTypeError(this.sessionId,e.type)}},_setupElement:function(e){var t=this.element.style;switch(t.display="inline-block",t.position="relative",e.type){case"doubleclick.banner":t.display="block",t.width=this.width+"px",t.height=this.height+"px";break;case"custom-tag":t.display="block"}},_createComboAd:function(e){this.element.setAttribute("id","tenmax-combo-"+h++),this.element.classList.add("rmax-type-combo-ad");var t=e.template||{},n=e.defaultAutoplay||!1,i=this,r=this._installRetargetingTracker,o=(e.trackers.retargeting||[]).filter((function(e){return"progress"===e.event})).map((function(e){return Object.assign({},e,{eventFn:r.bind(i,e)})}));return new a({trackerManager:this.trackerManager,space:{element:this.element,width:this.width,height:this.height,mobileFullWidth:!0,defaultAutoplay:n},adData:Object.assign({trackers:e.trackers},e.content),customProgressTrackers:o,template:{cssURL:t.cssURL,jsURL:t.jsURL,htmlURL:t.htmlURL,content:t.content,capability:t.capability||{}}})},_setupAd:function(e){o.prototype._setupAd.apply(this,arguments),this.isVideoAd&&this.ad.events.pipe(this._handleVideoAdEvent.bind(this))},_afterRunPlan:function(e){o.prototype._afterRunPlan.apply(this,arguments),e||(this.element.classList.add("rmax-type-noad"),this.element.style.display="none")},_handleVideoAdEvent:function(e,t){if(u.isVideoProgress(e)){var n=this._firedEvents||(this._firedEvents={});if(n[e])return;n[e]=!0}this._fireTracker(e!==u.CLICK?e:"video"===t?u.VIDEO_CLICK:u.COMPANION_CLICK)},_handleTrackers:function(e){if(o.prototype._handleTrackers.apply(this,arguments),this.isVideoAd){var t=e.channel.trackers||{},n=this.trackerManager;n.add(u.VIDEO_CLICK,t.videoClickTracker),n.add(u.COMPANION_CLICK,t.companionClickTracker),n.add(u.START,t.start),n.add(u.FIRST_QUARTILE,t.firstQuartile),n.add(u.MIDPOINT,t.midpoint),n.add(u.THIRD_QUARTILE,t.thirdQuartile),n.add(u.COMPLETE,t.complete)}},_handleViewableTrackers:function(e,t){this.isVideoAd?(this.trackerManager.add(u.VIEWABLE_DETERMINED,t.viewable),this.trackerManager.add(u.VIEWABLE_UNDETERMINED,t.viewUndetermined),this._monitorViewability(l.VIDEO)):o.prototype._handleViewableTrackers.apply(this,arguments)},_fireViewableTracker:function(e){var t=this.isVideoAd?e?u.VIEWABLE_UNDETERMINED:u.VIEWABLE_DETERMINED:u.VIEWABLE,n=e?2:0;this._fireTracker(t,{scrolled:0,needScroll:0,noAd:n,failed:n,requestId:this.sessionId})},_installRetargetingTracker:function(e){if(e.codeUrl){var t=document.createElement("iframe");t.src=e.codeUrl,t.style.display="none",t.width=0,t.height=0,this.element.appendChild(t)}}}),Object.defineProperty(p.prototype,"isVideoAd",{get:function(){var e=this.ad;return!(!e||e.type!==s.COMBO)}}),e.exports=p},function(e,t,n){var i=n(1),r=n(0),o=n(10),s=n(6),a=n(30),c=n(3),d=n(18),u=n(19).isPhone,l=n(8),h=n(14),p=n(21),f=n(77),m=n(88),_=n(90),v=n(91),y=n(92),g=n(57),E=n(34),b=n(7),w=Object.assign({},o,{dom:c});function A(e){if(!e.space.element)throw new Error("Space element is required");p.call(this,h.COMBO),this.trackerManager=e.trackerManager,this.space=e.space.element,this.style={width:e.space.width,height:e.space.height},this.options=e,this.monitorVisibleEvent=!!e.monitorVisibleEvent,this.defaultAutoplay=!!e.space.defaultAutoplay,this.dynamicVideoPlay=!!e.space.dynamicVideoPlay,this.adData=e.adData,this.template=e.template,this.resourceRequests={},this.initModules()}r.inherit(A,p),A.prototype._display$=function(){var e=this.template.capability||{};return e.containerWidth&&(this.space.style.width="100%"),e.mobileFullWidth&&u&&this.makeSpaceFullWidth(),!e.fixedContainerSize||this.space.style.width||this.space.style.height||this.fixedContainerSize(),this._emitter.emit("setup"),this.setupModules(),this._display0$()},A.prototype.setVideoVisibilityTarget=function(e){this._videoVisibilityTarget=e},A.prototype.fixedContainerSize=function(){if("object"==typeof this.options.space){var e=this.options.space.width;null!=e&&""!==e&&(this.space.style.width=isNaN(e)?e:e+"px");var t=this.options.space.height;null!=t&&""!==t&&(this.space.style.height=isNaN(t)?t:t+"px")}},A.prototype.makeSpaceFullWidth=function(){var e=this.space,t=window.innerWidth;e.style.display="inline-block",e.style.width="100%";var n=e.getBoundingClientRect();if(0!==n.width){this.spaceWidth=c.isInIframe?window.innerWidth:screen.width,this.isFullWidth=!0;var i=-n.left,r=n.right-t;e.style.position="relative",e.style.width=t+"px",e.style.marginLeft=i+"px",e.style.marginRight=r+"px",e.classList.add("full-width")}},A.prototype.initModules=function(){var e=this.options.space||{};this.displayManager=new y(this.space,{logo:e.logo}),this.templateManager=new v(this.template)},A.prototype.setupModules=function(){this.setupVideo(),this.setupCompanion(),this.setupTemplate(),this.detectSpaceRemove()},A.prototype.setupVideo=function(){var e=this.videoObj=this.adData.video;s.loadCSS$("//tenmax-static.cacafly.net/ssp/player.css");var t=this.videoPlayer=new f({src:e.url});this._emitter.emit("player",t),t.progress;var n=this.videoAnchor=new _({content:e.clickThroughUrl});n.appendChild(t),this.resourceRequests.video$=t.loaded$,this._setupProgressEvent();var i=this,r=function(e,t){i._emitter.emit(e,"video",t)};n.events.pipe(r),t.events.pipe(r)},A.prototype.setupCompanion=function(){var e=this.adData.companion;if(e){var t=this.image=new m({src:e.url}),n=this.imageAnchor=new _({content:e.clickThroughUrl});n.appendChild(t),this.resourceRequests.companion$=t.loaded$;var r=this,o=function(e,t){r._emitter.emit(e,"companion",t)};n.events.pipe(o),t.events.pipe(o)}else this.resourceRequests.companion$=i.reject(new g(E.UNABLE_DISPLAY_COMPANIONAD))},A.prototype.setupTemplate=function(){this.resourceRequests.template$=this.templateManager.load$()},A.prototype._setupProgressEvent=function(){var e=this.videoPlayer.progress;e.monitorDefault();var t=this._groupProgressTrackers(this.adData.trackers.progress),n=this.trackerManager;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=b.ofProgress(r.offset);n.add(o,r.urls),e.monitorTime(o,r.offset)}this.options.customProgressTrackers&&this.options.customProgressTrackers.forEach((function(t){e.monitorTime(t.eventFn,t.offset)}))};A.prototype._monitorEnteringViewport=function(){var e={threshold:.01},t=this,n=this.space,i=new d.VisibilityObserver(n,e,(function(e,n){(e||n)&&(t.space.classList.add("entered"),n||t.displayManager.expand(),i.disconnect())}));this._enteredObserver=i},A.prototype._callScripts=function(e){var t=this._scripts||{},n=t[e];"function"==typeof n&&n.call(t,this,w)},A.prototype._display0$=function(e){var t=this,n=this.resourceRequests;this.displayManager.setVideo(this.videoAnchor.element);return i.all([n.template$.then((function(e){var n=e.js;"function"==typeof n&&(n={init:n}),t._scripts=n||{},t._callScripts("init"),t.displayManager.setTemplate(e),t.displayManager.setTitle(t.adData.title)})),o.any$([n.video$.then((function(){}),(function(e){throw l.log(e),e})),n.companion$.then((function(){t.displayManager.setCompanion(t.imageAnchor.element)}),(function(e){throw l.log(e),t.displayManager.videoOnly(),e}))])]).then((function(){return t._callScripts("beforeDisplay"),t.displayManager.render$()})).then((function(){t._element=t.space,t._callScripts("afterDisplay"),t._monitorVideoVisibleRate(),t._monitorEnteringViewport()}))},A.prototype._monitorVideoVisibleRate=function(){!window.IntersectionObserver&&d.isInRegularIframe?this._monitorVideoVisibleRateUndetermined():this._monitorVideoVisibleRate0()},A.prototype._monitorVideoVisibleRateUndetermined=function(){if(this.monitorVisibleEvent&&(this.videoPlayer._doVisible(),this.image&&this.image._doVisible()),this.defaultAutoplay){l.log("auto play"),this.videoInView=!0;var e=this.videoPlayer;e.loaded$.then((function(){e.play()}))}},A.prototype._monitorVideoVisibleRate0=function(){var e=this._videoVisibilityTarget;if("function"==typeof e)try{e=e()}catch(t){e=void 0}var t=e||this.videoPlayer.videoElement;t&&(this.monitorVisibleEvent&&(this.videoPlayer.monitorVisibility({ref:t}),this.image&&this.image.monitorVisibility()),!1!==this.dynamicVideoPlay&&this._hackVideoAutoPlay(),this.videoPlayer.autoPlay({ref:t}))},A.prototype._hackVideoAutoPlay=function(){this.videoPlayer.autoPlay=function(e){if(this._destroyed)return this;var t=(e=e||{}).ref||this.videoElement,n={threshold:e.threshold||.5},i=this,r=new a({threshold:1e3,initialState:!0},(function(e){i._updateVideoByVisibility(!e)}));return this.visibilityObserver=new d.VisibilityObserver(t,n,(function(e,t){!t&&r.update(!e)})),this}},A.prototype._groupProgressTrackers=function(e){return(e||[]).reduce((function(e,t){var n=""+t.offset;return(e[n]||(e[n]={offset:t.offset,urls:[]})).urls.push(t.trackingUrl),e}),{})},A.prototype._destroy=function(){this.videoPlayer&&this.videoPlayer.destroy(),p.prototype._destroy.apply(this,arguments)},A.prototype.detectSpaceRemove=function(){var e=this,t=c.handleDOMRemoved(this.space,(function(){l.log("destroying space"),e.destroy(),t()}))},e.exports=A},function(e,t,n){var i=n(0),r=n(19),o=n(18),s=n(78),a=n(11),c=n(54),d=n(80),u=n(81),l=n(83),h=n(84),p=n(85),f=n(7);function m(e,t){a.call(this,"video-player");var n=e.params;if(t=t||{},(this.loader=this._getLoader(e)).load(),this._setupContainer(e,t),this._setupLoadingBar(),this._setupVideo(n),e.key){this.assetKey=e.key;var i=this._clickHandler=this._handleClick.bind(this);this.element.addEventListener("click",i)}this._loaded$=this.loader.loaded$.then(this._setupControls.bind(this)).then(this._handleLoaded.bind(this)),n&&null!=n.viewed&&this._processView(~~n.viewed)}i.inherit(m,a),Object.assign(m.prototype,c,{play:function(){this._loaded?this.videoElement.play():this._playRequested=!0},pause:function(){this._loaded?this.videoElement.pause():this._playRequested=void 0},monitorVisibility:function(e){return e=e&&e.ref?e:Object.assign({},e,{ref:this.videoElement}),c.monitorVisibility.call(this,e)},autoPlay:function(e){if(this._destroyed)return this;if(!1===e)return this.pause(),this._autoPlayVisibilityObserver&&this._autoPlayVisibilityObserver.disconnect(),this;var t=(e=e||{}).ref||this.element,n={threshold:e.threshold||.5},i=this._updateVideoByVisibility.bind(this);return this._autoPlayVisibilityObserver=new o.VisibilityObserver(t,n,i),this},destroy:function(){this.jumboPlayButton&&this.jumboPlayButton.destroy(),this.controlBar&&this.controlBar.destroy(),this.unmuteButton&&this.unmuteButton.destroy(),this.unmonitorVisibility(),this._autoPlayVisibilityObserver&&this._autoPlayVisibilityObserver.disconnect(),this._progress&&this._progress.destroy(),this._clickHandler&&this.element.removeEventListener("click",this._clickHandler);var e=this.videoElement;e.parentNode&&e.parentNode.removeChild(e),a.prototype.destroy.apply(this,arguments)},_handleLoaded:function(){this._loaded=!0,this._destroyed||this._playRequested&&(this.videoElement.play(),this._playRequested=void 0)},_getLoader:function(e){if(e.loader)return e.loader;if(!e.src)throw new Error("Either loader or src is required in asset");return e.loader=new s(e.src)},_setupContainer:function(e,t){var n=this.element=t.container||this._createContainer(e);n.setAttribute("data-rmax-widget-type","video-player"),this.loader.loaded||(n.classList.add("loading"),this.loader.loaded$.then(n.classList.remove.bind(n.classList,"loading"))),e.params&&e.params.unmutePosition&&!e.params.controlBar&&n.classList.add(e.params.unmutePosition)},_createContainer:function(e){var t=document.createElement("div");return t.id="tenmax-video-player",t.classList.add("video_container"),e.params&&e.params.controlBar?t.classList.add(e.params.controlBar):r.isMobile||e.params&&e.params.unmutePosition?r.isMobile&&t.classList.add("mobile"):t.classList.add("traditional"),t},_setupControls:function(){if(!this._destroyed){var e=this.videoElement,t=this.jumboPlayButton=new h(e),n=this.controlBar=new d(e),i=this.unmuteButton=new l(e),r=this._handleControlEvent.bind(this);t.events.pipe(r),n.events.pipe(r),i.events.pipe(r),this.element.appendChild(t.element),this.element.appendChild(n.element),this.element.appendChild(i.element)}},_updateVideoByVisibility:function(e,t){this[e||t?"play":"pause"]()},_handleControlEvent:function(e,t){var n={originalEvent:t};f.isInteractive(e)&&(n.progress=this.videoElement.currentTime),this._emit(e,n)},_setupLoadingBar:function(){var e=this.loadingBar=new u;this.element.appendChild(e.element),this.loader.loaded$.then(this.loadingBar.remove())},_setupVideo:function(e){var t=this.videoElement;t.setAttribute("playsinline","playsinline"),t.setAttribute("loop","loop"),t.setAttribute("muted","muted"),t.muted=!0;var n=e&&e.poster;n&&t.setAttribute("poster",n),this.element.appendChild(t)},_handleClick:function(e){e.defaultPrevented||(e._assetKey=this.assetKey)},_processView:function(e){this.progress.monitorTime(f.VIEWED,e)}}),Object.defineProperty(m.prototype,"loaded",{get:function(){return this._loaded}}),Object.defineProperty(m.prototype,"loaded$",{get:function(){return this._loaded$}}),Object.defineProperty(m.prototype,"videoElement",{get:function(){return this.loader.element}}),Object.defineProperty(m.prototype,"progress",{get:function(){return this._progress||(this._progress=new p(this.videoElement),this._progress.events.pipe(this._emit.bind(this))),this._progress}}),m.createDefault=function(e){var t=new m(e);return t.monitorVisibility(),t.progress.monitorDefault(),t.autoPlay(),t},e.exports=m},function(e,t,n){var i=n(1),r=n(0),o=n(53);function s(e){o.call(this,e)}r.inherit(s,o),Object.assign(s.prototype,{_loadWithElement$:function(e){var t=document.createElement("video"),n=new i((function(n,i){function r(){s(),n()}function o(n){s(),i("Video Loading Error: "+t.error.code+"; details: "+t.error.message+"; src:"+e)}function s(){t.removeEventListener("canplay",r),t.removeEventListener("canplaythrough",r),t.removeEventListener("error",o)}t.addEventListener("canplay",r,!1),t.addEventListener("canplaythrough",r,!1),t.addEventListener("error",o,!1),t.src=e,t.load()}));return[t,n]}}),e.exports=s},function(e,t,n){var i=n(1),r=n(5);function o(e){this._src=e,Object.defineProperty(this,"loaded$",{value:this._getLoaded$()})}o.prototype={load$:function(){return this.load(),this.loaded$},load:function(){this._loadRequested||(this._loadRequested=!0,this._load$(this._src).then(this._resolve,this._reject))},_getLoaded$:function(){var e=this;return new i((function(t,n){e._resolve=function(){e._loaded=!0,t()},e._reject=function(t){e._error=t,n(t)}}))},_load$:r.unimplemented},Object.defineProperty(o.prototype,"loaded",{get:function(){return!!this._loaded}}),Object.defineProperty(o.prototype,"error",{get:function(){return this._error}}),e.exports=o},function(e,t,n){var i=n(0),r=n(3),o=n(7),s=n(11),a=n(55),c=n(33);function d(e){var t=r.elementBuilder("div",{className:e}),n=r.elementBuilder("div"),i=r.elementBuilder("span");return n.appendChild(i),t.appendChild(n),{btnContainer:t,btn:n}}function u(e){s.call(this,"video-control-bar"),this.videoElement=e,this._setupElement(),this._bindVideoEvents(e),this._syncVideoState(e),this._bindControlEvents()}i.inherit(u,s),Object.assign(u.prototype,c,a),u.prototype._setupElement=function(){this._setupPlayButton(),this._setupPauseButton(),this._setupVolumeButton(),this._setupProgressBar();var e=r.elementBuilder("div",{className:"video_controls"});Object.defineProperty(this,"element",{value:e}),e.appendChild(this.playBtnContainer),e.appendChild(this.pauseBtnContainer),e.appendChild(this.progressBarContainer),e.appendChild(this.volumeBtnContainer)},u.prototype._setupPlayButton=function(){var e=d("control play");this.playBtnContainer=e.btnContainer,this.playBtn=e.btn},u.prototype._setupPauseButton=function(){var e=d("control pause");this.pauseBtnContainer=e.btnContainer,this.pauseBtn=e.btn},u.prototype._setupVolumeButton=function(){var e=d("control volume");this.volumeBtnContainer=e.btnContainer,this.volumeBtn=e.btn},u.prototype._setupProgressBar=function(){var e=this.progressBarContainer=r.elementBuilder("div",{className:"progress-bar"}),t=this.fillRateComponent=r.elementBuilder("div",{className:"progress-fill",$width:"0%"});e.appendChild(t)},u.prototype._bindVideoEvents=function(e){this._bindVideoPlayingEvents(e),this._bindVideoVolumeEvents(e),this._bindVideoProgressEvents(e)},u.prototype._bindVideoProgressEvents=function(e){var t=this._updateProgress.bind(this),n=setInterval(t,50);this._unbindVideoProgressEvents=function(){clearInterval(n)}},u.prototype._unbindVideoEvents=function(e){this._unbindVideoPlayingEvents(e),this._unbindVideoVolumeEvents(e),this._unbindVideoProgressEvents(e)},u.prototype._syncVideoState=function(e){this._updatePlayingState(e,!e.paused),this._updateVolumeState(e),this._updateProgress()};u.prototype._updateProgress=function(){if(this._playing){var e=this.videoElement,t=this.fillRateComponent;r.raf$().then((function(){var n=e.currentTime/e.duration||0;t.style.width=100*n+"%"}))}},u.prototype._bindControlEvents=function(){this.playBtn.addEventListener("click",this._play.bind(this)),this.pauseBtn.addEventListener("click",this._pause.bind(this)),this.volumeBtn.addEventListener("click",this._toggleMuted.bind(this))},u.prototype._pause=function(e){e.preventDefault(),this.videoElement.pause(),this._emitter.emit(o.PAUSE,e)},u.prototype._play=function(e){e.preventDefault(),this.videoElement.play(),this._emitter.emit(o.PLAY,e)},u.prototype._toggleMuted=function(e){e.preventDefault();var t=this.videoElement.muted=!this.videoElement.muted;this._emitter.emit(t?o.MUTE:o.UNMUTE,e)},u.prototype.getPlayButton=function(){return this.playBtnContainer},u.prototype.getPauseButton=function(){return this.pauseBtnContainer},u.prototype.getVolumeButton=function(){return this.volumeBtnContainer},u.prototype.getProgressBar=function(){return this.progressBarContainer},u.prototype.destroy=function(){this._unbindVideoEvents(),s.prototype.destroy.apply(this,arguments)},e.exports=u},function(e,t,n){var i=n(0),r=n(82),o=n(11);function s(){o.call(this,"loading-bar"),this._setupElement()}i.inherit(s,o),Object.assign(s.prototype,{_setupElement:function(){(this.element=document.createElement("div")).insertAdjacentHTML("afterbegin",r)},remove:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},destroy:function(){o.prototype.destroy.apply(this,arguments)}}),e.exports=s},function(e,t){e.exports='<style>\n  #tenmax-player-loadingbar.sk-wave {\n    position: absolute;\n    width: 5em;\n    height: 3.5em;\n    text-align: center;\n    font-size: 16px;\n    margin: auto;\n    position: absolute;\n    top: 0; left: 0; bottom: 0; right: 0;\n  }\n  #tenmax-player-loadingbar.sk-wave .sk-rect {\n    background-color: #333;\n    height: 100%;\n    width: 0.6em;\n    margin: 0 0.2em;\n    display: inline-block;\n    -webkit-animation: sk-waveStretchDelay 1.8s infinite ease-in-out;\n            animation: sk-waveStretchDelay 1.8s infinite ease-in-out; }\n  #tenmax-player-loadingbar.sk-wave .sk-rect1 {\n    -webkit-animation-delay: -1.8s;\n            animation-delay: -1.8s; }\n  #tenmax-player-loadingbar.sk-wave .sk-rect2 {\n    -webkit-animation-delay: -1.65s;\n            animation-delay: -1.65s; }\n  #tenmax-player-loadingbar.sk-wave .sk-rect3 {\n    -webkit-animation-delay: -1.5s;\n            animation-delay: -1.5s; }\n  #tenmax-player-loadingbar.sk-wave .sk-rect4 {\n    -webkit-animation-delay: -1.35s;\n            animation-delay: -1.35s; }\n  #tenmax-player-loadingbar.sk-wave .sk-rect5 {\n    -webkit-animation-delay: -1.2s;\n            animation-delay: -1.2s; }\n\n  @-webkit-keyframes sk-waveStretchDelay {\n    0%, 40%, 100% {\n      -webkit-transform: scaleY(0.4);\n              transform: scaleY(0.4);\n            background-color: #008799;}\n    20% {\n      -webkit-transform: scaleY(1);\n              transform: scaleY(1);\n              background-color: #000; } }\n\n  @keyframes sk-waveStretchDelay {\n    0%, 40%, 100% {\n      -webkit-transform: scaleY(0.4);\n              transform: scaleY(0.4);\n              background-color: #000; }\n    20% {\n      -webkit-transform: scaleY(1);\n              transform: scaleY(1);\n              background-color: #008799; } }\n</style>\n<div class="sk-wave" id="tenmax-player-loadingbar">\n  <div class="sk-rect sk-rect1" ></div><div class="sk-rect sk-rect2" ></div><div class="sk-rect sk-rect3" ></div><div class="sk-rect sk-rect4" ></div><div class="sk-rect sk-rect5" ></div>\n</div>\n'},function(e,t,n){var i=n(0),r=n(7),o=n(11),s=n(55),a=n(33);function c(e){o.call(this,"unmute-button"),this.videoElement=e,this._pristine=!0,this._setupElement(),this._bindVideoVolumeEvents(e),this._bindVideoPlayingEvents(e),this._updateVolumeState(e),this._updatePlayingState(e),this._bindControlEvents()}i.inherit(c,o),Object.assign(c.prototype,s,a,{_setupElement:function(){var e=document.createElement("div");e.className="unmute-btn pristine",e.innerHTML='<div class="unmute-btn-inner"><div class="volume"><div><span></span></div></div><div class="label">Tap to Unmute</div></div>',Object.defineProperty(this,"element",{value:e})},_updateVolumeState:function(e){void 0!==this._volumeOn&&(this._updatePristineState(),this._updateInteractedState()),s._updateVolumeState.apply(this,arguments)},_updatePlayingState:function(e,t){void 0===this._playing||t||this._updatePristineState(e),a._updatePlayingState.apply(this,arguments)},_updatePristineState:function(){this._pristine&&(this._pristine=!1,this.element.classList.remove("pristine"))},_updateInteractedState:function(){this.interacted||(this.interacted=!0,this.element.classList.add("interacted"))},_bindControlEvents:function(){this.element.addEventListener("click",this._toggleMuted.bind(this))},_toggleMuted:function(e){e.preventDefault();var t=this.videoElement.muted=!this.videoElement.muted;this._emitter.emit(t?r.MUTE:r.UNMUTE,e)},destroy:function(){this._unbindVideoVolumeEvents(),this._unbindVideoPlayingEvents(),o.prototype.destroy.apply(this,arguments)}}),e.exports=c},function(e,t,n){var i=n(0),r=n(7),o=n(11),s=n(33);function a(e){o.call(this,"jumbo-play-button"),this.videoElement=e,this._setupElement(),this._bindVideoPlayingEvents(e),this._updatePlayingState(e,!e.paused),this._bindControlEvents()}i.inherit(a,o),Object.assign(a.prototype,s,{_setupElement:function(){var e=document.createElement("div");e.className="jumbo-play-btn-overlay",e.innerHTML='<div><span class="jumbo-play-btn"></span></div>';var t=e.querySelector(".jumbo-play-btn");Object.defineProperty(this,"element",{value:e}),Object.defineProperty(this,"button",{value:t})},_bindControlEvents:function(){this.button.addEventListener("click",this._play.bind(this))},_play:function(e){e.preventDefault(),this.videoElement.play(),this._emitter.emit(r.PLAY,e)},destroy:function(){this._unbindVideoPlayingEvents(),o.prototype.destroy.apply(this,arguments)}}),e.exports=a},function(e,t,n){var i=n(86),r=n(20),o=n(7);function s(e){this._observer=new i(e);var t=this._emitter=new r;this._emitFn=function(e){return"function"==typeof e?e:t.emit.bind(t,e)}}Object.assign(s.prototype,{monitorDefault:function(){return this._defaultMonitored?this:(this._defaultMonitored=!0,this.monitorPercentage(o.START,0,!0),this.monitorPercentage(o.FIRST_QUARTILE,.25),this.monitorPercentage(o.MIDPOINT,.5),this.monitorPercentage(o.THIRD_QUARTILE,.75),this.monitorComplete(o.COMPLETE),this)},monitorTime:function(e,t,n){return this._observer.time$(t,n).then(this._emitFn(e)),this},monitorPercentage:function(e,t,n){return this._observer.percentage$(t,n).then(this._emitFn(e)),this},monitorComplete:function(e){return this._observer.completed$.then(this._emitFn(e)),this},destroy:function(){this._emitter.clear(),this._observer.disconnect()}}),Object.defineProperty(s.prototype,"events",{get:function(){return this._emitter.events}}),e.exports=s},function(e,t,n){var i=n(87);function r(e,t){t=t||{},this._videoElement=e,this._timeTracker=new i,this._percentageTracker=new i,this._update=this._update.bind(this),e.addEventListener("timeupdate",this._update),this.completed$.then(this.disconnect.bind(this))}r.prototype={time$:function(e,t){return this._timeTracker.track$(e,t)},percentage$:function(e,t){return this._percentageTracker.track$(e,t)},disconnect:function(){this._videoElement.removeEventListener("timeupdate",this._update)},_update:function(){var e=this._videoElement.currentTime,t=e/this._videoElement.duration;isNaN(e)||isNaN(t)||(0===e&&this._timeTracker.maxValue>0?(this._timeTracker.complete(),this._percentageTracker.complete()):(this._timeTracker.update(e),this._percentageTracker.update(t)))}},Object.defineProperty(r.prototype,"completed$",{get:function(){return this._timeTracker.completed$}}),Object.defineProperty(r.prototype,"completed",{get:function(){return this._timeTracker.completed}}),e.exports=r},function(e,t,n){var i=n(1);function r(e,t){for(var n,i=0,r=e.length;i<r&&(n=e[i])&&!(n.strictly?t<=n.value:t<n.value);i++);return i}function o(e){for(var t=0,n=e.length;t<n;t++)e[t].resolve()}function s(e){this._max=e||0,this._trackers=[];var t=this;Object.defineProperty(this,"completed$",{value:new i((function(e){t._resolveCompleted=e}))})}s.prototype={track$:function(e,t){if(this.completed||(t?e<this._max:e<=this._max))return i.resolve();var n={value:e,strictly:!!t};return this._trackers.splice(r(this._trackers,e),1,n),new i((function(e){n.resolve=e}))},update:function(e){if(!(this.completed||e<=this._max)){this._max=e;var t=r(this._trackers,e);o(this._trackers.splice(0,t))}},complete:function(){if(!this.completed){this._completed=!0;var e=this._trackers;this._trackers=void 0,o(e),this._resolveCompleted()}},destroy:function(){}},Object.defineProperty(s.prototype,"maxValue",{get:function(){return!!this._max}}),Object.defineProperty(s.prototype,"completed",{get:function(){return!!this._completed}}),e.exports=s},function(e,t,n){var i=n(0),r=n(11),o=n(89),s=n(54);function a(e,t){if(r.call(this,"image"),t=t||{},(this.loader=this._getLoader(e)).load(),this._setupElement(t),e.key){this.assetKey=e.key;var n=this._clickHandler=this._handleClick.bind(this);this.element.addEventListener("click",n)}this._loaded$=this.loader.loaded$}i.inherit(a,r),Object.assign(a.prototype,s,{destroy:function(){this._clickHandler&&this.element.removeEventListener("click",this._clickHandler)},_getLoader:function(e){if(e.loader)return e.loader;if(!e.src)throw new Error("Either loader or src is required in asset");return e.loader=new o(e.src)},_setupElement:function(e){this.element=this.loader.element},_handleClick:function(e){e.defaultPrevented||(e._assetKey=this.assetKey)}}),Object.defineProperty(a.prototype,"loaded$",{get:function(){return this._loaded$}}),a.createDefault=function(e){return new a(e).monitorVisibility()},e.exports=a},function(e,t,n){var i=n(1),r=n(0),o=n(53);function s(e){o.call(this,e)}r.inherit(s,o),Object.assign(s.prototype,{_loadWithElement$:function(e){var t=document.createElement("img"),n=new i((function(n,i){function r(){s(),n()}function o(t){s(),i("Image Loading Error: "+e)}function s(){t.removeEventListener("load",r),t.removeEventListener("error",o)}t.addEventListener("load",r,!1),t.addEventListener("error",o,!1),t.src=e}));return[t,n]}}),e.exports=s},function(e,t,n){var i=n(0),r=n(31);function o(e,t){r.call(this,"anchor"),t=t||{},this._setupElement(e.content,t)}i.inherit(o,r),Object.assign(o.prototype,{_setupElement:function(e,t){var n=this.element=t.element||document.createElement("a");n.href=e,n.target="_blank";var i=this._clickHandler=this._handleClick.bind(this);n.addEventListener("click",i)},_handleClick:function(e){e.defaultPrevented||this._emitter.emit("click",Object.assign({originalEvent:e},e._assetKey&&{assetKey:e._assetKey}))},destroy:function(){this._clickHandler&&this.element.removeEventListener("click",this._clickHandler),r.prototype.destroy.apply(this,arguments)}}),o.createDefault=function(e){return new o(e)},e.exports=o},function(e,t,n){var i=n(1),r=n(2),o=n(6);function s(e){if(!e||!e.content&&!e.htmlURL)throw new Error("One of content HTML or htmlURL is required");this.cssURL=this._processURL(e.cssURL),this.jsURL=this._processURL(e.jsURL),this.htmlURL=this._processURL(e.htmlURL),this.content=e.content,this.resources$=[]}s.prototype._processURL=function(e){return e},s.prototype.load$=function(){var e=this.cssURL,t=this.jsURL,n=this.htmlURL,r=this.content;return e?(this.css$=o.loadCSS$(e),this.resources$.push(this.css$)):this.resources$.push(i.resolve()),t?(this.js$=o.importJS$(t),this.resources$.push(this.js$)):this.resources$.push(i.resolve()),this.html$=n?o.ajaxGet(n,!1):r?i.resolve(r):i.reject("Requires one of htmlURL or content"),this.resources$.push(this.html$),i.all(this.resources$).then((function(e){return{css:e[0],js:e[1],html:e[2]}}))},s.prototype.getCSS$=function(){return this.css$},s.prototype.getJS$=function(){return this.js$},s.prototype.getHTML$=function(){return this.html$},r.register("TemplateManager",s),e.exports=s},function(e,t,n){var i=n(0),r=n(3),o=n(6),s=n(20),a=n(56);function c(e,t){this.spaceElement=e,this.options=t||{},this.expaned=!1,this.renderLogo=this.renderLogo.bind(this)}i.inherit(c,s),c.prototype.setVideo=function(e){this.videoElement=e,this.templateElement&&this._attachVideo(e)},c.prototype._attachVideo=function(){this.videoContainer=this.templateDOM.querySelector("#tenmax-combo-ad-video"),this.videoContainer.innerHTML="",this.videoContainer.appendChild(this.videoElement),this._videoAttached=!0},c.prototype.setCompanion=function(e){this.companionElement=e,this.templateElement&&this._attachCompanion()},c.prototype.setTitle=function(e){var t=this.templateDOM.querySelector("#tenmax-combo-ad-title");t&&(t.innerHTML=e)},c.prototype._attachCompanion=function(){this.companionContainer=this.templateDOM.querySelector("#tenmax-combo-ad-companion"),this.companionContainer.innerHTML="",this.companionContainer.appendChild(this.companionElement),this._companionAttached=!0},c.prototype.setTemplate=function(e){this.templateDOM=r.buildElementsFromHtml(e.html)[0],this.cssElement=e.css,this.templateElement=!0,this.videoElement&&this._attachVideo(),this.companionElement&&this._attachCompanion()},c.prototype.render$=function(){var e=this;return this.loadSandboxCss().then((function(){e.renderTemplateToSpace(),e.renderLogo()}))},c.prototype.setContainer=function(e,t){this.container=e,this.position=t},c.prototype.getTemplateDOM=function(){return this.templateDOM},c.prototype.renderError=function(){this.hideLoadingOverlay()},c.prototype.renderTemplateToSpace=function(e){var t=this.container;t?"prepend"===this.position&&t.firstElementChild?t.insertBefore(this.templateDOM,t.firstElementChild):t.appendChild(this.templateDOM):(this.spaceElement.innerHTML="",this.spaceElement.appendChild(this.templateDOM))},c.prototype.renderLogo=function(){if(!1!==this.options.logo){var e=this.container||this.spaceElement,t=e&&(e.querySelector(".logo-container")||e.querySelector(".combo-ad"));t&&(this.logo=new a({container:t}))}},c.prototype.loadSandboxCss=function(){return o.loadCSS$("//tenmax-static.cacafly.net/ssp/sandbox.css")},c.prototype.videoOnly=function(){this.spaceElement.classList.add("video-only")},c.prototype.expand=function(){this.expaned||(this.spaceElement.classList.add("expand"),this.expaned=!0)},e.exports=c},function(e,t,n){var i=n(0),r=n(2),o=n(29),s=n(94);function a(e){o.call(this,e,"universal"),this._planRequestPath=this._adRequestPath="/supply/universal/rmax-ad"}i.inherit(a,o),Object.assign(a.prototype,{_processPlanResponse:function(e,t){return{sessionId:e.requestId,channels:this._processPlanChannels(e,t)}},_processPlanChannels:function(e,t){switch(e.adType){case"VIDEO":var n=new s(e.adContent);n.checkSchema();var i=n.getVideo();return this._saveAsiaMaxAdToCache(t,"asiamax.combo",Object.assign({type:"asiamax.combo",content:{video:i,companion:n.getCompanion()},template:e.ext.ppapTemplate,cid:n.getCampaignId(),crid:i.creativeId,trackers:this._processComboTrackers(e,n.getTrackers())},e.ext.defaultAutoplay&&{defaultAutoplay:e.ext.defaultAutoplay})),[{type:"asiamax.combo"}];case"NO_AD":switch(e.remainingFlow){case"TENMAX":return[{type:"doubleclick.banner",publisherDomain:e.publisherDomain,spaceCountry:e.spaceCountry,trackers:{impression:e.trackingUrls,viewable:e.viewableTrackingUrls}}];case"CUSTOM_AD_TAG":return[{type:"custom-tag",content:e.remainingFlowContent,deepInto:0,trackers:{impression:e.trackingUrls,viewable:e.viewableTrackingUrls}}];case"DROP":return[];default:throw new Error("Unexpected response.remainingFlow: "+e.remainingFlow)}default:throw new Error("Unexpected response.adType: "+e.adType)}},_processComboTrackers:function(e,t){var n=Object.assign({},t),i=e.ext||{};return n.impression=n.impressions||[],delete n.impressions,n.impression=n.impression.concat(i.impreTrackers||[]),n.error=n.errors,delete n.errors,n.script=i.impreJsTrackers||[],n.retargeting=i.retargetingTrackers||[],n},_requestAsiaMaxAd$:function(){throw new Error}}),a.selector='.rmax[data-rmax-space-type="UNIVERSAL"], .rmax-universal[data-rmax-space-type="UNIVERSAL"]',r.register("UniversalAdService",a),e.exports=a},function(e,t,n){var i=n(57),r=n(34),o=n(95).parse;function s(e){this.parsedVASTObj=o(e),this.videoObject=this.parsedVASTObj.ads[0]&&this.parsedVASTObj.ads[0].creatives.filter((function(e){return"linear"===e.type}))[0]}s.prototype.getCampaignId=function(){return this.parsedVASTObj.adId},s.prototype.getVideo=function(){if(void 0===this.videoObject||0===this.videoObject.mediaFiles.length||0===this.videoObject.mediaFiles[0].length)return{};var e=this.videoObject.mediaFiles[0];return{creativeId:this.videoObject.creativeId,url:e.fileURL,clickThroughUrl:this.videoObject.videoClickThrough,duration:this.videoObject.duration,width:e.width,height:e.height}},s.prototype.haveVideo=function(){return 0!==Object.keys(this.getVideo()).length},s.prototype.haveCompanion=function(){return!!this.getCompanion()},s.prototype.getCompanion=function(){var e=this.parsedVASTObj.ads[0]&&this.parsedVASTObj.ads[0].creatives.filter((function(e){return"companions"===e.type}))[0];if(e&&!(e.companions.length<=0)&&void 0!==(e=e.companions[0]))return void 0!==e.staticResource?{type:"static",url:e.staticResource.fileURL,clickThroughUrl:e.companionClickThrough,companionClickTracking:e.companionClickTracking}:void 0},s.prototype.getExtensions=function(){return this.parsedVASTObj.ads[0]&&this.parsedVASTObj.ads[0].extensions||{}},s.prototype.getErrorUrls=function(){return this.parsedVASTObj.ads[0]&&this.parsedVASTObj.ads[0].errors||[]},s.prototype.hasWrapper=function(){return this.parsedVASTObj.ads[0]&&this.parsedVASTObj.ads[0].hasOwnProperty("vastAdTagURI")},s.prototype.getTrackers=function(){var e=this.videoObject?this.videoObject.trackingEvents:{},t=this.videoObject||{},n=this.parsedVASTObj.ads[0]||{},i=this.getCompanion(),r=this.getExtensions(),o=function(e){return e.trackingUrl},s=e.progress||[],a=e.start&&e.start.map(o),c=e.firstQuartile&&e.firstQuartile.map(o),d=e.midpoint&&e.midpoint.map(o),u=e.thirdQuartile&&e.thirdQuartile.map(o),l=e.complete&&e.complete.map(o),h=e.creativeView&&e.creativeView.map(o),p=t.videoClickTracking&&t.videoClickTracking,f=i&&i.companionClickTracking||[],m=t.videoClickThrough,_=i&&i.clickThroughUrl,v=r.viewable,y=r.viewUndetermined,g=n.errors;return{impressions:n.impressions,start:a,firstQuartile:c,midpoint:d,thirdQuartile:u,complete:l,creativeView:h,viewable:v,viewUndetermined:y,progress:s,videoClickTracker:p,videoClickThrough:m,companionClickThrough:_,companionClickTracker:f,errors:g}},s.prototype.checkSchema=function(){if(this.hasWrapper())throw new i(r.WRAPPER_LIMIT_REACHED);if(!this.haveVideo())throw new i(r.GENERAL_LINEAR_ERROR)},e.exports=s},function(e,t){var n=["2.0","3.0"].reduce((function(e,t){return e[t]=!0,e}),{});function i(e){return s(e,{CompanionClickThrough:function(e,t){e.companionClickThrough.push(a(t))},CompanionClickTracking:function(e,t){e.companionClickTracking.push(a(t))},TrackingEvents:function(e,t){e.trackingEvents=o(t)},StaticResource:function(e,t){e.staticResource=function(e){return{creativeType:e.getAttribute("creativeType"),fileURL:a(e)}}(t)}},{width:u(e.getAttribute("width")),height:u(e.getAttribute("height")),companionClickThrough:[],companionClickTracking:[]})}function r(e){return{delivery:e.getAttribute("delivery"),mimeType:e.getAttribute("type"),width:u(e.getAttribute("width")),height:u(e.getAttribute("height")),bitrate:u(e.getAttribute("bitrate")),fileURL:a(e)}}function o(e){return s(e,{Tracking:function(e,t){var n=t.getAttribute("event"),i={trackingUrl:a(t)};"progress"===n&&(i.offset=l(t.getAttribute("offset"))),(e[n]||(e[n]=[])).push(i)}},{})}function s(e,t,n){return d(e).reduce((function(e,n){var i=t[n.nodeName];switch(typeof i){case"function":i(e,n);break;case"object":s(n,i,e)}return e}),n)}function a(e){var t=e&&(e.textContent||e.text);return t?t.trim():void 0}function c(e){return d(e)[0]}function d(e){return e.children?Array.prototype.slice.call(e.children):Array.prototype.filter.call(e.childNodes,(function(e){return e.nodeType===Node.ELEMENT_NODE}))}function u(e){return e?parseInt(e,10):void 0}function l(e){if(!e)return 0;if(e.indexOf("%")>0)return e;var t=e.split(":");return 60*(60*u(t[0])+u(t[1]))+u(t[2])}e.exports={parse:function(e,t){return e&&function(e,t){var u=e.documentElement;if("VAST"!==u.nodeName)throw new Error("VAST: Not a VAST XML");return function(e,t){var u=e.getAttribute("version");if(!n[u])throw new Error("VAST: Unsupported VAST version: "+u);return s(e,{Ad:function(e,n){var u=function(e,t){var n=e.getAttribute("id"),u=c(e);if(u&&"Wrapper"===u.nodeName)throw new Error("VAST: <Wrapper> not supported.");if(!u||"InLine"!==u.nodeName)throw new Error("VAST: <InLine> element not found.");return Object.assign({id:n},function(e,t){return s(e,{Impression:function(e,t){e.impressions.push(a(t))},Error:function(e,t){e.errors.push(a(t))},Creatives:function(e,t){e.creatives=function(e){return d(e).map((function(e){var t=e.getAttribute("id"),n=function(e){var t=c(e);switch(t.nodeName){case"Linear":return function(e){return s(e,{Duration:function(e,t){e.duration=l(a(t))},MediaFiles:function(e,t){e.mediaFiles=function(e){return d(e).map(r)}(t)},VideoClicks:function(e,t){Object.assign(e,function(e){return s(e,{ClickThrough:function(e,t){e.videoClickThrough.push(a(t))},ClickTracking:function(e,t){e.videoClickTracking.push(a(t))}},{videoClickThrough:[],videoClickTracking:[]})}(t))},TrackingEvents:function(e,t){e.trackingEvents=o(t)}},{type:"linear"})}(t);case"CompanionAds":return function(e){return{type:"companions",companions:d(e).map(i)}}(t)}throw new Error("Unsupported creative type: "+t.nodeName)}(e);return n&&(n.creativeId=n.id=t),n})).filter((function(e){return void 0!==e}))}(t)},Extensions:function(e,n){e.extensions=function(e,t){return Object.assign(function(e){return s(e,{Extension:{ViewableImpression:{Viewable:function(e,t){e.viewable.push(a(t))},ViewUndetermined:function(e,t){e.viewUndetermined.push(a(t))}}}},{viewable:[],viewUndetermined:[]})}(e),function(e,t){if(!t||!Object.keys(t).length)return;return s(e,{Extension:function(e,n){var i=n.getAttribute("type");if("function"==typeof t[i]){var r=e[i]||(e[i]={});t[i](r,n)}}},{})}(e,t))}(n,t.extensions)}},{impressions:[],errors:[],creatives:[],extensions:{viewable:[],viewUndetermined:[]}})}(u,t))}(n,t);e.ads.push(u),void 0===e.adId&&(e.adId=u.id)}},{version:u,ads:[]})}(u,t)}((new DOMParser).parseFromString(e,"text/xml"),t||{})},helpers:{reduceChildren:s,getCustomTrackings:function(e,t){var n=t&&t.reduce((function(e,t){return e[t]=!0,e}),{});return s(e,{CustomTracking:{Tracking:function(e,t){var i=t.getAttribute("event");n&&!n[i]||(e[i]||(e[i]=[])).push(a(t))}}},{})},child:c,text:a,int:u,duration:l}}},,,,,,,function(e,t,n){n(39),n(74),n(58)},,,,,,,function(e,t,n){n(36),e.exports=n(102)}]);