function setPrivacyLanguage(){var i=getCookie("CnaClosePrivacy"),n=getCookie("CnaCloseLanguage"),t;n==null&&(showLanguageBar()||(setCookie("CnaCloseLanguage",1,5256e3,""),n=1));i==null&&n==null?($("body").addClass("bar-both-open"),$(".privacy-bar").addClass("need"),$(".language-bar").addClass("need")):i==null?($("body").addClass("GDPR-open"),$(".privacy-bar").addClass("need")):n==null&&($("body").addClass("language-open"),$(".language-bar").addClass("need"));t=5256e3;$(".close-privacy").click(function(){var n=$("body");$(this).parent().removeClass("need");headerHeightCalculation();setCookie("CnaClosePrivacy",1,t,"")});$(".close-language").click(function(){var n=$("body");$(this).parent().removeClass("need");headerHeightCalculation();setCookie("CnaCloseLanguage",1,t,"")});headerHeightCalculation()}function showLanguageBar(){var i=!1,r=["en","ja","es"],n=(navigator.language||navigator.browserLanguage).toLowerCase(),t;for(n=n.substring(0,2),$("#language-bar-en").hide(),$("#language-bar-ja").hide(),$("#language-bar-es").hide(),t=0;t<r.length;t++)if(r[t].toLowerCase().indexOf(n)!=-1){i=!0;switch(n){case"en":$("#language-bar-en").show();break;case"ja":$("#language-bar-ja").show();break;case"es":$("#language-bar-es").show()}break}return i}function headerHeightCalculation(){var r,u,f,n,t,i;window.innerWidth<=1024&&(r=$(".mobileHeader").outerHeight(),u=$(".privacy-bar").hasClass("need")?$(".privacy-bar").outerHeight():0,f=$(".language-bar").hasClass("need")?$(".language-bar").outerHeight():0,n=r+u+f,$(".sideMenu").css("top",n-1),t=$(".main-menu").outerHeight(),i=$("body").hasClass("instantStatus")?$(".instant").outerHeight():0,$("header").css("height",n+t+i),$(".scrollable").css("top",n+t+i),$(".container").css("padding-top",n+t+i),$(".bg-gradient-gray").css("top",n+t+i))}function replaceVideoUrls(n){var t,i=n.attr("href").split("/"),r;i[2]==="cnavideo.cna.com.tw"&&(r=i[i.length-1].split("?v="),r.length===2&&(t=r[0]));t!==undefined&&n.attr("href","https://www.cna.com.tw/news/video/"+t+".aspx")}function setInitViewDFP(){var t=$(".adslot[data-isinitview='Y'], .adslot_infinite[data-isinitview='Y']").filter(":visible"),n=[];t.length&&googletag.cmd.push(function(){$(t).each(function(t){var i=$(this);i.attr("js_render","true");switch(i.attr("data-dfp")){case"cna2018_all_pc_970x250_M":n[t]=googletag.defineSlot("/137033094/"+i.attr("data-dfp"),[[970,250],[1,1]],i.attr("id")).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0);break;default:n[t]=googletag.defineSlot("/137033094/"+i.attr("data-dfp"),[parseInt(i.attr("data-width")),parseInt(i.attr("data-height"))],i.attr("id")).addService(googletag.pubads())}});googletag.pubads().disableInitialLoad();googletag.enableServices();googletag.pubads().addEventListener("slotRenderEnded",function(){});$(t).each(function(){googletag.display($(this).attr("id"))});$(n).each(function(t){googletag.pubads().refresh([n[t]])})})}function callAPI(n,t){$.ajax({url:n,type:"GET",data:null,async:!1,contentType:"application/json",dataType:"json",success:function(n,i){i==="success"?t(n):t(null)},error:function(){t(null)}})}function setCookie(n,t,i,r){var f=new Date,u;f.setTime(f.getTime()+i*6e4);u=n+"="+escape(t)+"; expires="+f.toGMTString()+";";r!==""&&(u+="domain="+r+";");u+="path=/";document.cookie=u}function getCookie(n){var u=null,i,t,r;if(document.cookie.length>0)for(i=document.cookie.split(";"),t=0;t<i.length;t++)if(r=i[t].split("="),jQuery.trim(r[0])===n){u=r[1];break}return u}function search(n){n!=""&&(location.href="/search/hysearchws.aspx?q="+encodeURI(n))}var isIE=function(){var n={};return function(t,i){var o=t?i?"is"+i+"IE"+t:"isIE"+t:"isIE",r=n[o],f,u,e,s;return typeof r!="undefined"?r:(t?(f=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:|Edge\/)(\d+)/),f?(u=parseInt(f[1]),r=i?i=="lt"?u<t:i=="gt"?u>t:undefined:u==t):t<=9?(e=document.createElement("b"),s="<!--[if "+(i?i:"")+" IE "+t+"]><i><\/i><![endif]-->",e.innerHTML=s,r=e.getElementsByTagName("i").length===1):r=undefined):r=navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0,n[o]=r,r)}}(),userAgent,googletag,PDcount,PDIclean,expireMinuts,cnaCrossAd;if(isIE(11,"lt")==!0&&alert("您的瀏覽器版本不支援，請升級瀏覽器！"),userAgent=navigator.userAgent,$(function(){function t(n,t){$(n).each(function(){$(this).text().length>t&&($(this).text($(this).text().substring(0,t)),$(this).html($(this).html()+"..."))})}isIE(11)==!0&&$("body").addClass("ImgForIE");userAgent.indexOf("Mac")>-1&&$("body").addClass("inMac");var n=window.innerWidth;n>1200&&n<1280?t(".subSite .ulist a",20):n<1024&&n>730?t(".subSite .ulist a",20):t(".subSite .ulist a",30);setPrivacyLanguage()}),$(function(){function n(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)}n()&&$("a").attr("target","_self")}),window.innerWidth<=1024&&$(".first-level[href*='http://cnavideo.cna.com.tw']").attr("href","https://www.cna.com.tw/list/video.aspx"),googletag=googletag||{},googletag.cmd=googletag.cmd||[],function(){var n=document.createElement("script"),i,t;n.async=!0;n.type="text/javascript";i="https:"===document.location.protocol;n.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}(),setInitViewDFP(),document.getElementById("sfpdonly")){PDcount=1;PDIclean=setInterval("checkPD()",2e3);function checkPD(){if(PDcount!=5){var n=document.querySelector("iframe[id*=\\/137033094\\/cna2018_all_pc_970x250_M]");n!==null&&n.getAttribute("data-load-complete")=="true"&&(n.contentWindow.document.querySelector("div>script").innerText.indexOf("definePassback('/7682122/")>0?(n.contentWindow.document.querySelector("div>div>div")&&n.contentWindow.document.querySelector("div>div>div").childNodes.length>0||n.contentWindow.document.querySelector("div>div>iframe"))&&(n.parentNode.parentNode.parentNode.style.height="auto",n.parentNode.parentNode.parentNode.style.overflow="visible",clearInterval(PDIclean)):(n.parentNode.parentNode.parentNode.style.height="auto",n.parentNode.parentNode.parentNode.style.overflow="visible"));PDcount++}else clearInterval(PDIclean)}}expireMinuts=60;cnaCrossAd=getCookie("CnaCrossAd");$(window).on("load",function(){if(window.innerWidth<1024)if(cnaCrossAd==null)setCookie("CnaCrossAd",1,expireMinuts,"");else if(cnaCrossAd==1){setCookie("CnaCrossAd",2,expireMinuts,"");var n="undefined";googletag.cmd.push(function(){n=googletag.defineSlot("/137033094/cna2018_m_320x480_cross",[[320,480],[300,250]],"div-gpt-ad-1540795118095-0").addService(googletag.pubads());googletag.pubads().enableSingleRequest();googletag.pubads().collapseEmptyDivs();googletag.enableServices();googletag.pubads().addEventListener("slotRenderEnded",function(n){switch(n.slot.getSlotElementId()){case"div-gpt-ad-1540795118095-0":var t=!n.isEmpty;t||$.colorbox.close()}})});loadJsCssFile(STATIC_DOC_PATH+"/css/colorbox.min.css","css",function(){loadJsCssFile(STATIC_DOC_PATH+"/js/jquery.colorbox.min.js","js",function(){$.colorbox({html:"<div id='popupBox'><a class='closepopBox' href=''><i class='icon-cross'><\/i><\/a><div class='centerAdvertise'><div class='advertiseCode'><div id='div-gpt-ad-1540795118095-0'><\/div><\/div><\/div><\/div>",width:"100%",maxWidth:"100%",height:"100%",maxHeight:"100%",title:!1,closeButton:!1,opacity:.85,onOpen:function(){googletag.cmd.push(function(){googletag.display("div-gpt-ad-1540795118095-0");googletag.pubads().refresh([n])});$("#colorbox").addClass("popupOpen");$("body").addClass("lockScroll")},onClosed:function(){$("body").removeClass("lockScroll")}});$(document).bind("cbox_open",function(){$("body").css({overflow:"hidden"})}).bind("cbox_closed",function(){$("body").css({overflow:"auto"})});$("body").on("click",".closepopBox",function(){$.colorbox.close()})})})}});$("#mySearch").on("click",function(){var n=$("input[class='darkerInput']").val();search(n)});$("input[class='darkerInput']").on("keydown",function(n){var i=n.keyCode||n.which,t;i==13&&(t=$(this).val(),search(t),n.preventDefault())});$(function(){function e(){var t=navigator.userAgent,i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),r=t.includes("Safari"),n=!1;return i&&r===!1&&(n=!0),n}function o(){$(".sub_menu li a").each(function(){var n=$(this).text(),t=n.match(/[\u0000-\u00ff]/g),i="",r;t?(r=Math.round(t.length/2),i=n.length>26?n.substring(0,26).indexOf(t)===-1?n.substring(0,26)+"...":n.substring(0,26+r)+"...":n):i=n.length>26?n.substring(0,26)+"...":n;$(this).text(i)})}var n,f;if(window.innerWidth>1023){var s=$(".subBlock"),h=$(".menu"),c=$("header"),r=!1;$(".main-menu > li").mouseenter(function(){$(this).addClass("current");r||o();r=!0});$(".main-menu > li").mouseleave(function(){$(".main-menu > li").removeClass("current");$(".subBlock").removeClass("open")})}n=$("body");f=$(".darkerBlock");$(".searchBtn").click(function(){n.find(".darkerBlock").addClass("open");n.addClass("lockScroll");$(".darkerInput").focus()});$(document).on("mouseup touchend",function(t){var i=$(".searchCon");i.is(t.target)||i.has(t.target).length!==0||(n.find(".darkerBlock").removeClass("open"),n.removeClass("lockScroll"),$(".darkerInput").blur())});if(window.innerWidth>1023&&$(".earthBtn").click(function(){var n=$(".language"),t=$(".langroup");n.hasClass("open")?(n.removeClass("open"),t.fadeOut(300)):(n.addClass("open"),t.fadeIn(300));$(document).mouseup(function(i){var r=$(".langroup");r.is(i.target)||r.has(i.target).length!==0||(n.removeClass("open"),t.fadeOut(300))})}),window.innerWidth<=1024){var t=$(".sideMenu"),i=$(".menu-toggle"),u=$(".darker");$("body").on("click",".menu-toggle",function(){i.hasClass("open")?(t.removeClass("open"),t.addClass("close"),u.removeClass("open"),n.removeClass("lockScroll"),i.removeClass("open")):(t.addClass("open"),t.removeClass("close"),u.addClass("open"),n.addClass("lockScroll"),i.addClass("open"))});e()?$(".page").length&&(document.querySelector(".page").classList.add("backpageStatus"),$(".backpage").click(function(){document.referrer.length==0?document.location.href="https://www.cna.com.tw":document.referrer.indexOf("cna.com.tw")>-1&&document.referrer.indexOf("facebook.com")>-1?history.go(-3):document.referrer.indexOf("cna.com.tw")>-1?history.go(-1):document.location.href="https://www.cna.com.tw"})):document.querySelector(".page")!==null&&document.querySelector(".page").classList.remove("backpageStatus")}});
/*! lazysizes - v4.0.3 */
!function(n,t){var i=t(n,n.document);n.lazySizes=i;"object"==typeof module&&module.exports&&(module.exports=i)}(window,function(n,t){"use strict";if(t.getElementsByClassName){var h,i,f=t.documentElement,e=n.Date,et=n.HTMLPictureElement,o="addEventListener",r="getAttribute",s=n[o],u=n.setTimeout,ot=n.requestAnimationFrame||u,d=n.requestIdleCallback,it=/^picture$/i,st=["load","error","lazyincluded","_lazyloaded"],p={},ht=Array.prototype.forEach,c=function(n,t){return p[t]||(p[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),p[t].test(n[r]("class")||"")&&p[t]},w=function(n,t){c(n,t)||n.setAttribute("class",(n[r]("class")||"").trim()+" "+t)},g=function(n,t){var i;(i=c(n,t))&&n.setAttribute("class",(n[r]("class")||"").replace(i," "))},l=function(n,t,i){var r=i?o:"removeEventListener";i&&l(n,t);st.forEach(function(i){n[r](i,t)})},a=function(n,i,r,u,f){var e=t.createEvent("CustomEvent");return r||(r={}),r.instance=h,e.initCustomEvent(i,!u,!f,r),n.dispatchEvent(e),e},nt=function(t,r){var u;!et&&(u=n.picturefill||i.pf)?u({reevaluate:!0,elements:[t]}):r&&r.src&&(t.src=r.src)},v=function(n,t){return(getComputedStyle(n,null)||{})[t]},rt=function(n,t,r){for(r=r||n.offsetWidth;r<i.minSize&&t&&!n._lazysizesWidth;)r=t.offsetWidth,t=t.parentNode;return r},y=function(){var n,i,r=[],s=[],f=r,e=function(){var t=f;for(f=r.length?s:r,n=!0,i=!1;t.length;)t.shift()();n=!1},o=function(r,o){n&&!o?r.apply(this,arguments):(f.push(r),i||(i=!0,(t.hidden?u:ot)(e)))};return o._lsFlush=e,o}(),b=function(n,t){return t?function(){y(n)}:function(){var t=this,i=arguments;y(function(){n.apply(t,i)})}},ct=function(n){var r,f=0,h=i.throttleDelay,t=i.ricTimeout,o=function(){r=!1;f=e.now();n()},s=d&&t>49?function(){d(o,{timeout:t});t!==i.ricTimeout&&(t=i.ricTimeout)}:b(function(){u(o)},!0);return function(n){var i;(n=n===!0)&&(t=33);r||(r=!0,i=h-(e.now()-f),0>i&&(i=0),n||9>i?s():u(s,i))}},ut=function(n){var t,r,i=99,f=function(){t=null;n()},o=function(){var n=e.now()-r;i>n?u(o,i-n):(d||f)(f)};return function(){r=e.now();t||(t=u(o,i))}};!function(){var t,r={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};i=n.lazySizesConfig||n.lazysizesConfig||{};for(t in r)t in i||(i[t]=r[t]);n.lazySizesConfig=i;u(function(){i.init&&k()})}();var ft=function(){var at,rt,gt,ft,ni,ti,ii,et,ot,st,lt,kt,vt,dt,ei=/^img$/i,oi=/^iframe$/i,si="onscroll"in n&&!/glebot/.test(navigator.userAgent),hi=0,yt=0,k=0,d=-1,pt=function(n){k--;n&&n.target&&l(n.target,pt);(!n||0>k||!n.target)&&(k=0)},ci=function(n,i){var u,r=n,e="hidden"==v(t.body,"visibility")||"hidden"!=v(n,"visibility");for(et-=i,lt+=i,ot-=i,st+=i;e&&(r=r.offsetParent)&&r!=t.body&&r!=f;)e=(v(r,"opacity")||1)>0,e&&"visible"!=v(r,"overflow")&&(u=r.getBoundingClientRect(),e=st>u.left&&ot<u.right&&lt>u.top-1&&et<u.bottom+1);return e},ri=function(){var y,n,o,s,l,e,a,c,p,u=h.elements;if((ft=i.loadMode)&&8>k&&(y=u.length)){for(n=0,d++,null==vt&&(("expand"in i)||(i.expand=f.clientHeight>500&&f.clientWidth>500?500:370),kt=i.expand,vt=kt*i.expFactor),vt>yt&&1>k&&d>2&&ft>2&&!t.hidden?(yt=vt,d=0):yt=ft>1&&d>1&&6>k?kt:hi;y>n;n++)if(u[n]&&!u[n]._lazyRace)if(si)if((c=u[n][r]("data-expand"))&&(e=1*c)||(e=yt),p!==e&&(ti=innerWidth+e*dt,ii=innerHeight+e,a=-1*e,p=e),o=u[n].getBoundingClientRect(),(lt=o.bottom)>=a&&(et=o.top)<=ii&&(st=o.right)>=a*dt&&(ot=o.left)<=ti&&(lt||st||ot||et)&&(i.loadHidden||"hidden"!=v(u[n],"visibility"))&&(rt&&3>k&&!c&&(3>ft||4>d)||ci(u[n],e))){if(wt(u[n]),l=!0,k>9)break}else!l&&rt&&!s&&4>k&&4>d&&ft>2&&(at[0]||i.preloadAfterLoad)&&(at[0]||!c&&(lt||st||ot||et||"auto"!=u[n][r](i.sizesAttr)))&&(s=at[0]||u[n]);else wt(u[n]);s&&!l&&wt(s)}},p=ct(ri),ui=function(n){w(n.target,i.loadedClass);g(n.target,i.loadingClass);l(n.target,fi);a(n.target,"lazyloaded")},li=b(ui),fi=function(n){li({target:n.target})},ai=function(n,t){try{n.contentWindow.location.replace(t)}catch(i){n.src=t}},vi=function(n){var t,u=n[r](i.srcsetAttr);(t=i.customMedia[n[r]("data-media")||n[r]("media")])&&n.setAttribute("media",t);u&&n.setAttribute("srcset",u)},yi=b(function(n,t,f,e,o){var s,h,v,c,p,b;(p=a(n,"lazybeforeunveil",t)).defaultPrevented||(e&&(f?w(n,i.autosizesClass):n.setAttribute("sizes",e)),h=n[r](i.srcsetAttr),s=n[r](i.srcAttr),o&&(v=n.parentNode,c=v&&it.test(v.nodeName||"")),b=t.firesLoad||"src"in n&&(h||s||c),p={target:n},b&&(l(n,pt,!0),clearTimeout(gt),gt=u(pt,2500),w(n,i.loadingClass),l(n,fi,!0)),c&&ht.call(v.getElementsByTagName("source"),vi),h?n.setAttribute("srcset",h):s&&!c&&(oi.test(n.nodeName)?ai(n,s):n.src=s),o&&(h||c)&&nt(n,{src:s}));n._lazyRace&&delete n._lazyRace;g(n,i.lazyClass);y(function(){(!b||n.complete&&n.naturalWidth>1)&&(b?pt(p):k--,ui(p))},!0)}),wt=function(n){var f,t=ei.test(n.nodeName),e=t&&(n[r](i.sizesAttr)||n[r]("sizes")),u="auto"==e;(u||!rt)&&t&&(n[r]("src")||n.srcset)&&!n.complete&&!c(n,i.errorClass)&&c(n,i.lazyClass)||(f=a(n,"lazyunveilread").detail,u&&tt.updateElem(n,!0,n.offsetWidth),n._lazyRace=!0,k++,yi(n,f,u,e,t))},bt=function(){if(!rt){if(e.now()-ni<999)return void u(bt,999);var n=ut(function(){i.loadMode=3;p()});rt=!0;i.loadMode=3;p();s("scroll",function(){3==i.loadMode&&(i.loadMode=2);n()},!0)}};return{_:function(){ni=e.now();h.elements=t.getElementsByClassName(i.lazyClass);at=t.getElementsByClassName(i.lazyClass+" "+i.preloadClass);dt=i.hFac;s("scroll",p,!0);s("resize",p,!0);n.MutationObserver?new MutationObserver(p).observe(f,{childList:!0,subtree:!0,attributes:!0}):(f[o]("DOMNodeInserted",p,!0),f[o]("DOMAttrModified",p,!0),setInterval(p,999));s("hashchange",p,!0);["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(n){t[o](n,p,!0)});/d$|^c/.test(t.readyState)?bt():(s("load",bt),t[o]("DOMContentLoaded",p),u(bt,2e4));h.elements.length?(ri(),y._lsFlush()):p()},checkElems:p,unveil:wt}}(),tt=function(){var n,f=b(function(n,t,i,r){var f,u,e;if(n._lazysizesWidth=r,r+="px",n.setAttribute("sizes",r),it.test(t.nodeName||""))for(f=t.getElementsByTagName("source"),u=0,e=f.length;e>u;u++)f[u].setAttribute("sizes",r);i.detail.dataAttr||nt(n,i.detail)}),r=function(n,t,i){var r,u=n.parentNode;u&&(i=rt(n,u,i),r=a(n,"lazybeforesizes",{width:i,dataAttr:!!t}),r.defaultPrevented||(i=r.detail.width,i&&i!==n._lazysizesWidth&&f(n,u,r,i)))},e=function(){var t,i=n.length;if(i)for(t=0;i>t;t++)r(n[t])},u=ut(e);return{_:function(){n=t.getElementsByClassName(i.autosizesClass);s("resize",u)},checkElems:u,updateElem:r}}(),k=function(){k.i||(k.i=!0,tt._(),ft._())};return h={cfg:i,autoSizer:tt,loader:ft,init:k,uP:nt,aC:w,rC:g,hC:c,fire:a,gW:rt,rAF:y}}});